{"version":3,"sources":["webpack:///webpack/bootstrap 3e779a767d7f54e8fdd5","webpack:///external \"react\"","webpack:///./src/lib/components/core/TextAnchor.js","webpack:///./src/lib/components/core/MeasurementLayerBase.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/lib/addStyles.js","webpack:///external \"draft-js\"","webpack:///./src/lib/components/MeasurementLayer.js","webpack:///./src/lib/utils/MeasurementUtils.js","webpack:///./src/lib/components/buttons/Icons.js","webpack:///./src/lib/components/buttons/MeasurementButtons.js","webpack:///./src/lib/components/core/CircleMeasurement.js","webpack:///./src/lib/components/core/LineMeasurement.js","webpack:///./src/lib/components/core/TextAnnotation.js","webpack:///./src/lib/index.js","webpack:///./src/lib/components/MeasurementLayer.css","webpack:///./src/lib/components/core/MeasurementLayerBase.css","webpack:///./src/lib/components/MeasurementLayer.css?5950","webpack:///./src/lib/components/core/MeasurementLayerBase.css?a25c","webpack:///./~/style-loader/lib/urls.js"],"names":["TextAnchor","state","buttonShowing","justCreated","onClick","setState","onDocumentMouseDown","e","textBox","contains","target","onDocumentKeyDown","key","keyCode","onDeleteButtonClick","event","button","preventDefault","stopPropagation","props","mounted","console","log","lengthX","addEventListener","document","setTimeout","removeEventListener","textAnchorStyle","left","x","top","y","transformOrigin","visibility","visible","className","children","deleteButton","PureComponent","MeasurementLayerBase","createdId","enabled","doubleClicked","createMeasurementComponent","measurement","type","id","widthInPx","heightInPx","measureLine","onDoubleClick","onChange","onCommit","delete","onMidMouse","measureCircle","keydown","measurements","filter","includes","n","enable","m","push","onMouseDown","length","finishAnyTextEdit","mode","lineCreationInProgress","mouseXAtPress","clientX","mouseYAtPress","clientY","circleCreationInProgress","onMouseMove","rect","root","getBoundingClientRect","endX","clamp","endY","getNextId","startX","startY","line","classList","add","a","cursorX","cursorY","centerX","centerY","radius","calculateRadius","circle","deltaX","deltaY","radiusInPx","Math","max","hypot","minRadiusInPx","sqrt","onMouseUp","endDrag","remove","arrowX","arrowY","xOffsetDirection","yOffsetDirection","textX","textY","text","editorState","editable","map","min","value","finishEdit","EditorState","moveFocusToEnd","moveSelectionToEnd","window","disabled","MeasurementLayer","disable","start","hasSize","calculateDistance","physicalWidth","physicalHeight","calculateArea","PI","RulerIcon","path","CircleIcon","TextIcon","MeasurementButtons","onRootMouseDown","rootClass","lineClass","circleClass","textClass","textOffset","CircleMeasurement","onStrokeMouseDown","strokeDragInProgress","onDragBegin","onFillMouseDown","fillDragInProgress","eventX","eventY","circleAtPress","centerXAtPress","parentWidth","centerYAtPress","parentHeight","centerClientX","centerClientY","radiusAtPress","theta","atan2","pointXAtPress","cos","pointYAtPress","sin","onDrag","dragOccurred","toggleDragStyles","newPointX","newPointY","radiusInPixels","anyDragAttempted","didValuesChange","getAnnotationLayerClassList","parentElement","toggle","stroke","fill","onTouchMove","edgeLength","quarterCircle","LineMeasurement","midHover","doubleClick","onStartMouseDown","startDragInProgress","onMidMouseDown","midDragInProgress","onEndMouseDown","endDragInProgress","lineAtPress","startXAtPress","startYAtPress","endXAtPress","endYAtPress","getXAfterDrag","getYAfterDrag","xAtPress","yAtPress","onMidMouseEnter","onMidMouseLeave","startLine","startGrabber","midLine","endLine","midGrabber","endGrabber","rotate","edgeX","edgeY","rotateIsSmall","abs","offsetX","offsetY","textRotate","rootClassName","lineClassName","handlerClassName","grabberClassName","colorStyle","Number","headWidth","headHeight","headHoverWidth","headHoverHeight","headHoverOffset","headGrabberWidth","headGrabberHeight","headGrabberOffset","TextAnnotation","propagateTextChanges","lineHover","headHover","lineDragged","headDragged","textDragged","drawHead","pointX","pointY","w","h","offset","rotateInDegrees","transform","updateMask","rootBox","maskRect","setAttribute","width","height","onTextMouseDown","textDragInProgress","onLineMouseDown","lineDragInProgress","onHeadMouseDown","headDragInProgress","textAtPress","arrowXAtPress","arrowYAtPress","textXAtPress","textYAtPress","onLineMouseEnter","onLineMouseLeave","onHeadMouseEnter","onHeadMouseLeave","startEdit","onTextChange","contentStateOnEditStart","getCurrentContent","setEditState","shiftKey","lineGrabber","headGrabber","editor","focus","onRootTouchStart","lineEndX","lineEndY","linePath","showLargerHead","head","hasText","textVisible","lineMaskId","lineMask","lineGrabberClass","headGrabberClass","createEmpty","module","exports"],"mappings":"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AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,EAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;AC7WA,qC;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;IAEqBqF,gB;;;;;;;;;;;;;;0MACnB5H,K,GAAQ,EAAEmE,MAAM,IAAR,E,QAwBRmB,G,GAAM,YAAM;AACV,YAAKlF,QAAL,CAAc,EAAE+D,MAAM,MAAR,EAAd;AACD,K,QAED0D,O,GAAU,YAAM;AACd,YAAKzH,QAAL,CAAc,EAAE+D,MAAM,IAAR,EAAcwD,UAAU,IAAxB,EAAd;AACD,K,QAED9D,M,GAAS,YAAM;AACb,YAAKzD,QAAL,CAAc,EAAE+D,MAAM,IAAR,EAAcwD,UAAU,KAAxB,EAAd;AACD,K,QAEDG,K,GAAQ,UAAChH,KAAD,EAAW;AACjB,YAAKV,QAAL,CAAc,EAAEU,YAAF,EAAd;AACD,K,QAEDsC,Q,GAAW,uBAAe;AACxB,YAAKhD,QAAL,CAAc,EAAE+D,MAAM,IAAR,EAAd;AACA,UAAI,MAAKjD,KAAL,CAAWkC,QAAf,EAAyB;AACvB,cAAKlC,KAAL,CAAWkC,QAAX,CAAoBR,WAApB;AACD;AACF,K;;;;;6BA3CQ;AAAA;;AACP,UAAMmF,UAAU,KAAK7G,KAAL,CAAW6B,SAAX,GAAuB,CAAvB,IAA4B,KAAK7B,KAAL,CAAW8B,UAAX,GAAwB,CAApE;AACA,aACE+E,WACE;AAAA;AAAA,UAAK,WAAU,mBAAf,EAAmC,KAAK;AAAA,mBAAM,OAAKnD,IAAL,GAAYtE,CAAlB;AAAA,WAAxC;AACE,sCAAC,8BAAD;AACE,oBAAU,KAAKN,KAAL,CAAW2H,QADvB;AAEE,wBAAc,KAAKzG,KAAL,CAAWuC,YAF3B;AAGE,oBAAU,KAAKvC,KAAL,CAAWiC,QAHvB;AAIE,qBAAW,KAAKjC,KAAL,CAAW6B,SAJxB;AAKE,sBAAY,KAAK7B,KAAL,CAAW8B,UALzB;AAME,uBAAa,KAAK9B,KAAL,CAAW+B,WAN1B;AAOE,yBAAe,KAAK/B,KAAL,CAAWqC,aAP5B;AAQE,gBAAM,KAAKvD,KAAL,CAAWmE,IARnB;AASE,oBAAU,KAAKf,QATjB;AAUE,sBAAY,KAAKlC,KAAL,CAAWoC;AAVzB;AADF,OAFJ;AAkBD;;;;EAvB2ChB,oB;;kBAAzBsF,gB;;;;;;;;;;;;ACLd,IAAMI,gDAAoB,SAApBA,iBAAoB,CAAC5C,IAAD,EAAO6C,aAAP,EAAsBC,cAAtB,EAAyC;AACxE,MAAMnC,SAAS,CAACX,KAAKN,IAAL,GAAYM,KAAKF,MAAlB,IAA4B+C,aAA3C;AACA,MAAMjC,SAAS,CAACZ,KAAKJ,IAAL,GAAYI,KAAKD,MAAlB,IAA4B+C,cAA3C;AACA,SAAOhC,KAAKE,KAAL,CAAWL,MAAX,EAAmBC,MAAnB,CAAP;AACD,CAJM;;AAMA,IAAMmC,wCAAgB,SAAhBA,aAAgB,CAACrC,MAAD,EAASmC,aAAT,EAAwBC,cAAxB,EAA2C;AACtE,SACEhC,KAAKkC,EAAL,GAAUtC,OAAOF,MAAjB,GAA0BE,OAAOF,MAAjC,GAA0CqC,aAA1C,GAA0DC,cAD5D;AAGD,CAJM,C;;;;;;;;;;;;;;ACNP;;;;;;AAEO,IAAMG,gCAAY,SAAZA,SAAY,GAAM;AAC7B,MAAMC,OACJ,8HACA,sIAFF;AAGA,SACE;AAAA;AAAA,MAAK,OAAM,IAAX,EAAgB,QAAO,IAAvB;AACE,4CAAM,GAAGA,IAAT,EAAe,WAAU,YAAzB;AADF,GADF;AAKD,CATM;;AAWA,IAAMC,kCAAa,SAAbA,UAAa;AAAA,SACxB;AAAA;AAAA,MAAK,OAAM,IAAX,EAAgB,QAAO,IAAvB;AACE,8CAAQ,WAAU,aAAlB,EAAgC,IAAG,KAAnC,EAAyC,IAAG,KAA5C,EAAkD,GAAE,KAApD;AADF,GADwB;AAAA,CAAnB;;AAMA,IAAMC,8BAAW,SAAXA,QAAW,GAAM;AAC5B,MAAMF,OACJ,4GACA,kHAFF;AAGA,SACE;AAAA;AAAA,MAAK,OAAM,IAAX,EAAgB,QAAO,IAAvB;AACE,4CAAM,GAAGA,IAAT,EAAe,WAAU,WAAzB;AADF,GADF;AAKD,CATM,C;;;;;;;;;;;;;;;ACnBP;;;;AACA;;;;;;;;;;IAEqBG,kB;;;;;;;;;;;;;;8MA6CnBC,e,GAAkB,iBAAS;AACzB5H,YAAMG,eAAN;AACAH,YAAME,cAAN;AACD,K;;;;;wCA/CmB;AAClB,WAAK4D,IAAL,CAAUrD,gBAAV,CAA2B,WAA3B,EAAwC,KAAKmH,eAA7C;AACD;;;2CAEsB;AACrB,WAAK9D,IAAL,CAAUrD,gBAAV,CAA2B,WAA3B,EAAwC,KAAKmH,eAA7C;AACD;;;6BAEQ;AAAA;;AACP,UAAMC,YAAY,gBAAgB,KAAKzH,KAAL,CAAWiD,IAAX,GAAkB,UAAlB,GAA+B,EAA/C,CAAlB;AACA,UAAMyE,YACJ,iBAAiB,KAAK1H,KAAL,CAAWiD,IAAX,KAAoB,MAApB,GAA6B,UAA7B,GAA0C,EAA3D,CADF;AAEA,UAAM0E,cACJ,mBAAmB,KAAK3H,KAAL,CAAWiD,IAAX,KAAoB,QAApB,GAA+B,UAA/B,GAA4C,EAA/D,CADF;AAEA,UAAM2E,YACJ,iBAAiB,KAAK5H,KAAL,CAAWiD,IAAX,KAAoB,MAApB,GAA6B,UAA7B,GAA0C,EAA3D,CADF;;AAGA,aACE;AAAA;AAAA,UAAK,WAAWwE,SAAhB,EAA2B,KAAK;AAAA,mBAAM,OAAK/D,IAAL,GAAYtE,CAAlB;AAAA,WAAhC;AACE;AAAA;AAAA;AACE,kBAAK,QADP;AAEE,uBAAWsI,SAFb;AAGE,qBAAS;AAAA,qBAAS,OAAK1H,KAAL,CAAWf,OAAX,CAAmB,MAAnB,CAAT;AAAA;AAHX;AAKE,wCAAC,gBAAD;AALF,SADF;AAQE;AAAA;AAAA;AACE,kBAAK,QADP;AAEE,uBAAW0I,WAFb;AAGE,qBAAS;AAAA,qBAAS,OAAK3H,KAAL,CAAWf,OAAX,CAAmB,QAAnB,CAAT;AAAA;AAHX;AAKE,wCAAC,iBAAD;AALF,SARF;AAeE;AAAA;AAAA;AACE,kBAAK,QADP;AAEE,uBAAW2I,SAFb;AAGE,qBAAS;AAAA,qBAAS,OAAK5H,KAAL,CAAWf,OAAX,CAAmB,MAAnB,CAAT;AAAA;AAHX;AAKE,wCAAC,eAAD;AALF;AAfF,OADF;AAyBD;;;;EA3C6CmC,oB;;kBAA3BmG,kB;;;;;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;;;;;;;;;AAEO,IAAMpC,wCAAgB,CAAtB;AACP,IAAM0C,aAAa,EAAnB;;IAEqBC,iB;;;;;;;;;;;;;;4MAmEnBC,iB,GAAoB,iBAAS;AAC3B,UAAInI,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACtB,cAAKmI,oBAAL,GAA4B,IAA5B;AACApI,cAAME,cAAN;AACA,cAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACD;AACF,K,QAED4E,e,GAAkB,iBAAS;AACzB,UAAItI,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACtB,cAAKsI,kBAAL,GAA0B,IAA1B;AACAvI,cAAME,cAAN;AACA,cAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACD;AACF,K,QAED2E,W,GAAc,UAACG,MAAD,EAASC,MAAT,EAAoB;AAChC,YAAKlF,aAAL,GAAqBiF,MAArB;AACA,YAAK/E,aAAL,GAAqBgF,MAArB;AACA,YAAKC,aAAL,GAAqB,MAAKtI,KAAL,CAAW4E,MAAhC;AACA,YAAK2D,cAAL,GAAsB,MAAKvI,KAAL,CAAW4E,MAAX,CAAkBJ,OAAlB,GAA4B,MAAKxE,KAAL,CAAWwI,WAA7D;AACA,YAAKC,cAAL,GAAsB,MAAKzI,KAAL,CAAW4E,MAAX,CAAkBH,OAAlB,GAA4B,MAAKzE,KAAL,CAAW0I,YAA7D;;AAEA,UAAMjF,OAAO,MAAKC,IAAL,CAAUC,qBAAV,EAAb;AACA,UAAMgF,gBAAgB,MAAKJ,cAAL,GAAsB9E,KAAK/C,IAAjD;AACA,UAAMkI,gBAAgB,MAAKH,cAAL,GAAsBhF,KAAK7C,GAAjD;AACA,UAAMiI,gBACJ,MAAK7I,KAAL,CAAW4E,MAAX,CAAkBF,MAAlB,GACAM,KAAKI,IAAL,CAAU,MAAKpF,KAAL,CAAWwI,WAAX,GAAyB,MAAKxI,KAAL,CAAW0I,YAA9C,CAFF;AAGA,UAAMI,QAAQ9D,KAAK+D,KAAL,CACZ,MAAK1F,aAAL,GAAqBuF,aADT,EAEZ,MAAKzF,aAAL,GAAqBwF,aAFT,CAAd;AAIA,YAAKK,aAAL,GAAqBH,gBAAgB7D,KAAKiE,GAAL,CAASH,KAAT,CAArC;AACA,YAAKI,aAAL,GAAqBL,gBAAgB7D,KAAKmE,GAAL,CAASL,KAAT,CAArC;AACD,K,QAEDtF,W,GAAc;AAAA,aAAS,MAAK4F,MAAL,CAAYxJ,MAAMwD,OAAlB,EAA2BxD,MAAM0D,OAAjC,CAAT;AAAA,K,QAEd8F,M,GAAS,UAAChB,MAAD,EAASC,MAAT,EAAoB;AAC3B,UACE,CAAC,MAAKF,kBAAL,IAA2B,MAAKH,oBAAjC,KACA,CAAC,MAAKqB,YAFR,EAGE;AACA,cAAKA,YAAL,GAAoB,IAApB;AACA,cAAKC,gBAAL;AACD;;AAED,UAAI,MAAKtB,oBAAT,EAA+B;AAC7B,YAAMuB,YAAY,MAAKP,aAAL,GAAqBZ,MAArB,GAA8B,MAAKjF,aAArD;AACA,YAAMqG,YAAY,MAAKN,aAAL,GAAqBb,MAArB,GAA8B,MAAKhF,aAArD;AACA,YAAMoG,iBAAiBzE,KAAKC,GAAL,CACrBD,KAAKE,KAAL,CAAWqE,SAAX,EAAsBC,SAAtB,CADqB,EAErBrE,aAFqB,CAAvB;AAIA,YAAIT,SACF+E,iBACAzE,KAAKI,IAAL,CAAU,MAAKpF,KAAL,CAAWwI,WAAX,GAAyB,MAAKxI,KAAL,CAAW0I,YAA9C,CAFF;;AAIA,YAAI,MAAK1I,KAAL,CAAW4E,MAAX,CAAkBJ,OAAlB,GAA4BE,MAA5B,GAAqC,CAAzC,EAA4C;AAC1CA,mBAAS,IAAI,MAAK1E,KAAL,CAAW4E,MAAX,CAAkBJ,OAA/B;AACD;AACD,YAAI,MAAKxE,KAAL,CAAW4E,MAAX,CAAkBJ,OAAlB,GAA4BE,MAA5B,GAAqC,CAAzC,EAA4C;AAC1CA,mBAAS,MAAK1E,KAAL,CAAW4E,MAAX,CAAkBJ,OAA3B;AACD;AACD,YAAI,MAAKxE,KAAL,CAAW4E,MAAX,CAAkBH,OAAlB,GAA4BC,MAA5B,GAAqC,CAAzC,EAA4C;AAC1CA,mBAAS,IAAI,MAAK1E,KAAL,CAAW4E,MAAX,CAAkBH,OAA/B;AACD;AACD,YAAI,MAAKzE,KAAL,CAAW4E,MAAX,CAAkBH,OAAlB,GAA4BC,MAA5B,GAAqC,CAAzC,EAA4C;AAC1CA,mBAAS,MAAK1E,KAAL,CAAW4E,MAAX,CAAkBH,OAA3B;AACD;AACD,cAAKzE,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAW4E,MAApC,IAA4CF,cAA5C;AACD,OAxBD,MAwBO,IAAI,MAAKyD,kBAAT,EAA6B;AAClC,YAAI3D,UACF,CAAC,MAAK+D,cAAL,GAAsBH,MAAtB,GAA+B,MAAKjF,aAArC,IACA,MAAKnD,KAAL,CAAWwI,WAFb;AAGA,YAAI/D,UACF,CAAC,MAAKgE,cAAL,GAAsBJ,MAAtB,GAA+B,MAAKhF,aAArC,IACA,MAAKrD,KAAL,CAAW0I,YAFb;;AAIA,YAAIlE,UAAU,MAAKxE,KAAL,CAAW4E,MAAX,CAAkBF,MAA5B,GAAqC,CAAzC,EAA4C;AAC1CF,oBAAU,IAAI,MAAKxE,KAAL,CAAW4E,MAAX,CAAkBF,MAAhC;AACD,SAFD,MAEO,IAAIF,UAAU,MAAKxE,KAAL,CAAW4E,MAAX,CAAkBF,MAA5B,GAAqC,CAAzC,EAA4C;AACjDF,oBAAU,MAAKxE,KAAL,CAAW4E,MAAX,CAAkBF,MAA5B;AACD;AACD,YAAID,UAAU,MAAKzE,KAAL,CAAW4E,MAAX,CAAkBF,MAA5B,GAAqC,CAAzC,EAA4C;AAC1CD,oBAAU,IAAI,MAAKzE,KAAL,CAAW4E,MAAX,CAAkBF,MAAhC;AACD,SAFD,MAEO,IAAID,UAAU,MAAKzE,KAAL,CAAW4E,MAAX,CAAkBF,MAA5B,GAAqC,CAAzC,EAA4C;AACjDD,oBAAU,MAAKzE,KAAL,CAAW4E,MAAX,CAAkBF,MAA5B;AACD;AACD,cAAK1E,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAW4E,MAApC,IAA4CJ,gBAA5C,EAAqDC,gBAArD;AACD;AACF,K,QAEDY,S,GAAY;AAAA,aAAS,MAAKC,OAAL,EAAT;AAAA,K,QAEZA,O,GAAU,YAAM;AACd,UAAI,MAAK+D,YAAT,EAAuB;AACrB,cAAKC,gBAAL;AACA,cAAKD,YAAL,GAAoB,KAApB;AACD;AACD,UAAMK,mBACJ,MAAK1B,oBAAL,IAA6B,MAAKG,kBADpC;AAEA,UAAI,MAAKH,oBAAT,EAA+B;AAC7B,cAAKA,oBAAL,GAA4B,KAA5B;AACD;AACD,UAAI,MAAKG,kBAAT,EAA6B;AAC3B,cAAKA,kBAAL,GAA0B,KAA1B;AACD;AACD,UAAIuB,oBAAoB,MAAKC,eAAL,EAAxB,EAAgD;AAC9C,cAAK3J,KAAL,CAAWkC,QAAX,CAAoB,MAAKlC,KAAL,CAAW4E,MAA/B;AACD;AACF,K,QAED+E,e,GAAkB;AAAA,aAChB,MAAK3J,KAAL,CAAW4E,MAAX,CAAkBJ,OAAlB,KAA8B,MAAK8D,aAAL,CAAmB9D,OAAjD,IACA,MAAKxE,KAAL,CAAW4E,MAAX,CAAkBH,OAAlB,KAA8B,MAAK6D,aAAL,CAAmB7D,OADjD,IAEA,MAAKzE,KAAL,CAAW4E,MAAX,CAAkBF,MAAlB,KAA6B,MAAK4D,aAAL,CAAmB5D,MAHhC;AAAA,K,QAKlBkF,2B,GAA8B;AAAA,aAAM,MAAKlG,IAAL,CAAUmG,aAAV,CAAwB1F,SAA9B;AAAA,K,QAE9BmF,gB,GAAmB,YAAM;AACvB,UAAI,MAAKtB,oBAAT,EAA+B;AAC7B,cAAKpD,MAAL,CAAYT,SAAZ,CAAsB2F,MAAtB,CAA6B,SAA7B;AACA,cAAKC,MAAL,CAAY5F,SAAZ,CAAsB2F,MAAtB,CAA6B,SAA7B;AACA,cAAKF,2BAAL,GAAmCE,MAAnC,CAA0C,uBAA1C;AACD;AACD,UAAI,MAAK3B,kBAAT,EAA6B;AAC3B,cAAKvD,MAAL,CAAYT,SAAZ,CAAsB2F,MAAtB,CAA6B,SAA7B;AACA,cAAKE,IAAL,CAAU7F,SAAV,CAAoB2F,MAApB,CAA2B,SAA3B;AACA,cAAKF,2BAAL,GAAmCE,MAAnC,CAA0C,qBAA1C;AACD;AACD,YAAKF,2BAAL,GAAmCE,MAAnC,CAA0C,aAA1C;AACD,K,QAEDnK,mB,GAAsB;AAAA,aAAM,MAAKK,KAAL,CAAWL,mBAAX,CAA+B,MAAKK,KAAL,CAAW4E,MAA1C,CAAN;AAAA,K;;;;;wCAzMF;AAClB,WAAKoF,IAAL,CAAU3J,gBAAV,CAA2B,WAA3B,EAAwC,KAAK6H,eAA7C;AACA,WAAK6B,MAAL,CAAY1J,gBAAZ,CAA6B,WAA7B,EAA0C,KAAK0H,iBAA/C;AACAzH,eAASD,gBAAT,CAA0B,WAA1B,EAAuC,KAAKmD,WAA5C;AACAgD,aAAOnG,gBAAP,CAAwB,SAAxB,EAAmC,KAAKgF,SAAxC;AACAmB,aAAOnG,gBAAP,CAAwB,MAAxB,EAAgC,KAAKiF,OAArC;AACD;;;2CAEsB;AACrB,WAAK0E,IAAL,CAAUxJ,mBAAV,CAA8B,WAA9B,EAA2C,KAAK0H,eAAhD;AACA,WAAK6B,MAAL,CAAYvJ,mBAAZ,CAAgC,WAAhC,EAA6C,KAAKuH,iBAAlD;AACAzH,eAASE,mBAAT,CAA6B,WAA7B,EAA0C,KAAKgD,WAA/C;AACAlD,eAASE,mBAAT,CAA6B,WAA7B,EAA0C,KAAKyJ,WAA/C;AACAzD,aAAOhG,mBAAP,CAA2B,SAA3B,EAAsC,KAAK6E,SAA3C;AACAmB,aAAOhG,mBAAP,CAA2B,MAA3B,EAAmC,KAAK8E,OAAxC;AACD;;;6BAEQ;AAAA;;AACP,UAAMd,UAAU,KAAKxE,KAAL,CAAW4E,MAAX,CAAkBJ,OAAlB,GAA4B,KAAKxE,KAAL,CAAWwI,WAAvD;AACA,UAAM/D,UAAU,KAAKzE,KAAL,CAAW4E,MAAX,CAAkBH,OAAlB,GAA4B,KAAKzE,KAAL,CAAW0I,YAAvD;AACA,UAAMhE,SACJ,KAAK1E,KAAL,CAAW4E,MAAX,CAAkBF,MAAlB,GACAM,KAAKI,IAAL,CAAU,KAAKpF,KAAL,CAAWwI,WAAX,GAAyB,KAAKxI,KAAL,CAAW0I,YAA9C,CAFF;AAGA,UAAM7C,QAAQpB,UAAUC,MAAV,GAAmBmD,UAAjC;AACA,UAAM/B,OAAO,KAAK9F,KAAL,CAAWqC,aAAX,CAAyB,KAAKrC,KAAL,CAAW4E,MAApC,CAAb;;AAEA,aACE;AAAA;AAAA,UAAK,WAAU,oBAAf,EAAoC,KAAK;AAAA,mBAAM,OAAKlB,IAAL,GAAYtE,CAAlB;AAAA,WAAzC;AACE;AAAC,8BAAD;AAAA;AACE,eAAGoF,OADL;AAEE,eAAGqB,KAFL;AAGE,iCAAqB,KAAKlG;AAH5B;AAKE;AAAA;AAAA,cAAK,WAAU,kBAAf,EAAkC,KAAK;AAAA,uBAAM,OAAKmG,IAAL,GAAY1G,CAAlB;AAAA,eAAvC;AACG0G;AADH;AALF,SADF;AAUE;AAAA;AAAA,YAAK,WAAU,iBAAf;AACE;AAAA;AAAA,cAAG,WAAU,eAAb;AACE;AACE,yBAAU,cADZ;AAEE,kBAAItB,OAFN;AAGE,kBAAIC,OAHN;AAIE,iBAAGC,MAJL;AAKE,mBAAK;AAAA,uBAAM,OAAKsF,IAAL,GAAY5K,CAAlB;AAAA;AALP,cADF;AAQE;AACE,yBAAU,gBADZ;AAEE,kBAAIoF,OAFN;AAGE,kBAAIC,OAHN;AAIE,iBAAGC,MAJL;AAKE,mBAAK;AAAA,uBAAM,OAAKqF,MAAL,GAAc3K,CAApB;AAAA;AALP,cARF;AAeE;AACE,yBAAU,QADZ;AAEE,kBAAIoF,OAFN;AAGE,kBAAIC,OAHN;AAIE,iBAAGC,MAJL;AAKE,mBAAK;AAAA,uBAAM,OAAKE,MAAL,GAAcxF,CAApB;AAAA;AALP;AAfF;AADF;AAVF,OADF;AAsCD;;;;EAjE4CgC,oB;;kBAA1B0G,iB;;;;;;;;;;;;;;;;;ACNrB;;;;AACA;;;;;;;;;;;;AAEA,IAAMoC,aAAa,EAAnB;AACA,IAAMrC,aAAa,EAAnB;AACA,IAAMsC,gBAAgBnF,KAAKkC,EAAL,GAAU,CAAhC;;IAEqBkD,e;;;;;;;;;;;;;;sMACpBtL,K,GAAQ,EAAEuL,UAAU,KAAZ,EAAmBC,aAAa,KAAhC,E,QA2JRC,gB,GAAmB,UAAC3K,KAAD,EAAW;AAC7B,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,OAAI1K,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACvB,UAAK2K,mBAAL,GAA2B,IAA3B;AACA5K,UAAME,cAAN;AACA,UAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACA;AACD,G,QAEDmH,c,GAAiB,UAAC7K,KAAD,EAAW;AAC3B,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,OAAI1K,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACvB,UAAK6K,iBAAL,GAAyB,IAAzB;AACA9K,UAAME,cAAN;AACA,UAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACA;AACD,G,QAEDqH,c,GAAiB,UAAC/K,KAAD,EAAW;AAC3B,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,OAAI1K,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACvB,UAAK+K,iBAAL,GAAyB,IAAzB;AACAhL,UAAME,cAAN;AACA,UAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACA;AACD,G,QAED2E,W,GAAc,UAACG,MAAD,EAASC,MAAT,EAAoB;AACjC,SAAKlF,aAAL,GAAqBiF,MAArB;AACA,SAAK/E,aAAL,GAAqBgF,MAArB;AACA,SAAKwC,WAAL,GAAmB,MAAK7K,KAAL,CAAWkE,IAA9B;AACA,SAAK4G,aAAL,GAAqB,MAAK9K,KAAL,CAAWkE,IAAX,CAAgBF,MAAhB,GAAyB,MAAKhE,KAAL,CAAWwI,WAAzD;AACA,SAAKuC,aAAL,GAAqB,MAAK/K,KAAL,CAAWkE,IAAX,CAAgBD,MAAhB,GAAyB,MAAKjE,KAAL,CAAW0I,YAAzD;AACA,SAAKsC,WAAL,GAAmB,MAAKhL,KAAL,CAAWkE,IAAX,CAAgBN,IAAhB,GAAuB,MAAK5D,KAAL,CAAWwI,WAArD;AACA,SAAKyC,WAAL,GAAmB,MAAKjL,KAAL,CAAWkE,IAAX,CAAgBJ,IAAhB,GAAuB,MAAK9D,KAAL,CAAW0I,YAArD;AACA,G,QAEDlF,W,GAAc,UAAC5D,KAAD,EAAW;AACxB,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,SAAKlB,MAAL,CAAYxJ,MAAMwD,OAAlB,EAA2BxD,MAAM0D,OAAjC;AACA,G,QAED8F,M,GAAS,UAAChB,MAAD,EAASC,MAAT,EAAoB;AAC5B,OACC,CAAC,MAAKmC,mBAAL,IACA,MAAKI,iBADL,IAEA,MAAKF,iBAFN,KAGA,CAAC,MAAKrB,YAJP,EAKE;AACD,UAAKA,YAAL,GAAoB,IAApB;AACA,UAAKC,gBAAL;AACA;;AAED,OAAI,MAAKkB,mBAAT,EAA8B;AAC7B,QAAMxG,SAAS,MAAKH,KAAL,CAAW,MAAKqH,aAAL,CAAmB,MAAKJ,aAAxB,EAAuC1C,MAAvC,CAAX,CAAf;AACA,QAAMnE,SAAS,MAAKJ,KAAL,CAAW,MAAKsH,aAAL,CAAmB,MAAKJ,aAAxB,EAAuC1C,MAAvC,CAAX,CAAf;AACA,UAAKrI,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAWkE,IAApC,IAA0CF,cAA1C,EAAkDC,cAAlD;AACA,IAJD,MAIO,IAAI,MAAK2G,iBAAT,EAA4B;AAClC,QAAMhH,OAAO,MAAKC,KAAL,CAAW,MAAKqH,aAAL,CAAmB,MAAKF,WAAxB,EAAqC5C,MAArC,CAAX,CAAb;AACA,QAAMtE,OAAO,MAAKD,KAAL,CAAW,MAAKsH,aAAL,CAAmB,MAAKF,WAAxB,EAAqC5C,MAArC,CAAX,CAAb;AACA,UAAKrI,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAWkE,IAApC,IAA0CN,UAA1C,EAAgDE,UAAhD;AACA,IAJM,MAIA,IAAI,MAAK4G,iBAAT,EAA4B;AAClC,QAAI1G,UAAS,MAAKkH,aAAL,CAAmB,MAAKJ,aAAxB,EAAuC1C,MAAvC,CAAb;AACA,QAAInE,UAAS,MAAKkH,aAAL,CAAmB,MAAKJ,aAAxB,EAAuC1C,MAAvC,CAAb;AACA,QAAIzE,QAAO,MAAKsH,aAAL,CAAmB,MAAKF,WAAxB,EAAqC5C,MAArC,CAAX;AACA,QAAItE,QAAO,MAAKqH,aAAL,CAAmB,MAAKF,WAAxB,EAAqC5C,MAArC,CAAX;AACA,QAAMxD,SAASjB,QAAOI,OAAtB;AACA,QAAMc,SAAShB,QAAOG,OAAtB;;AAEA;AACA,QAAID,UAAS,CAAb,EAAgB;AACfA,eAAS,CAAT;AACAJ,aAAOiB,MAAP;AACA,KAHD,MAGO,IAAIb,UAAS,CAAb,EAAgB;AACtBA,eAAS,CAAT;AACAJ,aAAO,IAAIiB,MAAX;AACA;AACD,QAAIZ,UAAS,CAAb,EAAgB;AACfA,eAAS,CAAT;AACAH,aAAOgB,MAAP;AACA,KAHD,MAGO,IAAIb,UAAS,CAAb,EAAgB;AACtBA,eAAS,CAAT;AACAH,aAAO,IAAIgB,MAAX;AACA;AACD,QAAIlB,QAAO,CAAX,EAAc;AACbI,eAAS,CAACa,MAAV;AACAjB,aAAO,CAAP;AACA,KAHD,MAGO,IAAIA,QAAO,CAAX,EAAc;AACpBI,eAAS,IAAIa,MAAb;AACAjB,aAAO,CAAP;AACA;AACD,QAAIE,QAAO,CAAX,EAAc;AACbG,eAAS,CAACa,MAAV;AACAhB,aAAO,CAAP;AACA,KAHD,MAGO,IAAIA,QAAO,CAAX,EAAc;AACpBG,eAAS,IAAIa,MAAb;AACAhB,aAAO,CAAP;AACA;AACD,UAAK9D,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAWkE,IAApC,IAA0CF,eAA1C,EAAkDC,eAAlD,EAA0DL,WAA1D,EAAgEE,WAAhE;AACA;AACD,G,QAED9B,a,GAAgB,UAACpC,KAAD,EAAW;AAC1B,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B,UAAKpL,QAAL,cAAmB,MAAKJ,KAAxB,IAA+BwL,aAAa,KAA5C,EAAmDD,UAAU,KAA7D;AACA,UAAKrK,KAAL,CAAWgC,aAAX,CAAyB,KAAzB,EAAgC,MAAKhC,KAAL,CAAWkE,IAA3C;AACA,IAHD,MAGO;AACN,UAAKhF,QAAL,cAAmB,MAAKJ,KAAxB,IAA+BwL,aAAa,IAA5C,EAAkDD,UAAU,KAA5D;AACA,UAAKT,2BAAL,GAAmCE,MAAnC,CAA0C,cAA1C;AACA,UAAK9J,KAAL,CAAWgC,aAAX,CAAyB,IAAzB,EAA+B,MAAKhC,KAAL,CAAWkE,IAA1C;AACA;AACD,G,QAEDgH,a,GAAgB,UAACE,QAAD,EAAWhI,OAAX;AAAA,UACf,CAACgI,WAAWhI,OAAX,GAAqB,MAAKD,aAA3B,IAA4C,MAAKnD,KAAL,CAAWwI,WADxC;AAAA,G,QAGhB2C,a,GAAgB,UAACE,QAAD,EAAW/H,OAAX;AAAA,UACf,CAAC+H,WAAW/H,OAAX,GAAqB,MAAKD,aAA3B,IAA4C,MAAKrD,KAAL,CAAW0I,YADxC;AAAA,G,QAGhBrD,S,GAAY,UAACzF,KAAD,EAAW;AACtB,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,SAAKhF,OAAL;AACA,G,QAEDA,O,GAAU,YAAM;AACf,OAAI,MAAKxG,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,OAAI,MAAKjB,YAAT,EAAuB;AACtB,UAAKC,gBAAL;AACA,UAAKD,YAAL,GAAoB,KAApB;AACA;AACD,OAAMK,mBACL,MAAKc,mBAAL,IACA,MAAKE,iBADL,IAEA,MAAKE,iBAHN;AAIA,OAAI,MAAKJ,mBAAT,EAA8B;AAC7B,UAAKA,mBAAL,GAA2B,KAA3B;AACA;AACD,OAAI,MAAKE,iBAAT,EAA4B;AAC3B,UAAKA,iBAAL,GAAyB,KAAzB;AACA;AACD,OAAI,MAAKE,iBAAT,EAA4B;AAC3B,UAAKA,iBAAL,GAAyB,KAAzB;AACA;AACD,OAAIlB,oBAAoB,MAAKC,eAAL,EAAxB,EAAgD;AAC/C,UAAK3J,KAAL,CAAWkC,QAAX,CAAoB,MAAKlC,KAAL,CAAWkE,IAA/B;AACA;AACD,G,QAEDyF,e,GAAkB;AAAA,UACjB,MAAK3J,KAAL,CAAWkE,IAAX,CAAgBF,MAAhB,KAA2B,MAAK6G,WAAL,CAAiB7G,MAA5C,IACA,MAAKhE,KAAL,CAAWkE,IAAX,CAAgBD,MAAhB,KAA2B,MAAK4G,WAAL,CAAiB5G,MAD5C,IAEA,MAAKjE,KAAL,CAAWkE,IAAX,CAAgBN,IAAhB,KAAyB,MAAKiH,WAAL,CAAiBjH,IAF1C,IAGA,MAAK5D,KAAL,CAAWkE,IAAX,CAAgBJ,IAAhB,KAAyB,MAAK+G,WAAL,CAAiB/G,IAJzB;AAAA,G,QAMlBwH,e,GAAkB,UAAC1L,KAAD,EAAW;AAC5B,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,SAAKtK,KAAL,CAAWoC,UAAX,CAAsB,OAAtB;AACA,SAAKlD,QAAL,cAAmB,MAAKJ,KAAxB,IAA+BuL,UAAU,IAAzC;AACA,G,QAEDkB,e,GAAkB,UAAC3L,KAAD,EAAW;AAC5B,OAAI,MAAKd,KAAL,CAAWwL,WAAf,EAA4B;AAC3B;AACA;AACD,SAAKtK,KAAL,CAAWoC,UAAX,CAAsB,OAAtB;AACA,SAAKlD,QAAL,cAAmB,MAAKJ,KAAxB,IAA+BuL,UAAU,KAAzC;AACA,G,QAEDT,2B,GAA8B;AAAA,UAAM,MAAKlG,IAAL,CAAUmG,aAAV,CAAwB1F,SAA9B;AAAA,G,QAE9BN,K,GAAQ,UAACsC,KAAD;AAAA,UAAWnB,KAAKkB,GAAL,CAAS,CAAT,EAAYlB,KAAKC,GAAL,CAAS,CAAT,EAAYkB,KAAZ,CAAZ,CAAX;AAAA,G,QAERmD,gB,GAAmB,YAAM;AACxB,OAAI,MAAKkB,mBAAT,EAA8B;AAC7B,UAAKgB,SAAL,CAAerH,SAAf,CAAyB2F,MAAzB,CAAgC,SAAhC;AACA,UAAK2B,YAAL,CAAkBtH,SAAlB,CAA4B2F,MAA5B,CAAmC,SAAnC;AACA,UAAKF,2BAAL,GAAmCE,MAAnC,CAA0C,oBAA1C;AACA;AACD,OAAI,MAAKY,iBAAT,EAA4B;AAC3B,UAAKc,SAAL,CAAerH,SAAf,CAAyB2F,MAAzB,CAAgC,SAAhC;AACA,UAAK4B,OAAL,CAAavH,SAAb,CAAuB2F,MAAvB,CAA8B,SAA9B;AACA,UAAK6B,OAAL,CAAaxH,SAAb,CAAuB2F,MAAvB,CAA8B,SAA9B;AACA,UAAK2B,YAAL,CAAkBtH,SAAlB,CAA4B2F,MAA5B,CAAmC,SAAnC;AACA,UAAK8B,UAAL,CAAgBzH,SAAhB,CAA0B2F,MAA1B,CAAiC,SAAjC;AACA,UAAK+B,UAAL,CAAgB1H,SAAhB,CAA0B2F,MAA1B,CAAiC,SAAjC;AACA,UAAKF,2BAAL,GAAmCE,MAAnC,CAA0C,kBAA1C;AACA;AACD,OAAI,MAAKc,iBAAT,EAA4B;AAC3B,UAAKe,OAAL,CAAaxH,SAAb,CAAuB2F,MAAvB,CAA8B,SAA9B;AACA,UAAK+B,UAAL,CAAgB1H,SAAhB,CAA0B2F,MAA1B,CAAiC,SAAjC;AACA,UAAKF,2BAAL,GAAmCE,MAAnC,CAA0C,kBAA1C;AACA;AACD,SAAKF,2BAAL,GAAmCE,MAAnC,CAA0C,aAA1C;AACA,G,QAEDnK,mB,GAAsB;AAAA,UAAM,MAAKK,KAAL,CAAWL,mBAAX,CAA+B,MAAKK,KAAL,CAAWkE,IAA1C,CAAN;AAAA,G;;;;;sCA1WF;AACnB,QAAKuH,YAAL,CAAkBpL,gBAAlB,CAAmC,WAAnC,EAAgD,KAAKkK,gBAArD;AACA,QAAKkB,YAAL,CAAkBpL,gBAAlB,CAAmC,YAAnC,EAAiD,KAAKiL,eAAtD;AACA,QAAKG,YAAL,CAAkBpL,gBAAlB,CAAmC,YAAnC,EAAiD,KAAKkL,eAAtD;AACA,QAAKK,UAAL,CAAgBvL,gBAAhB,CAAiC,WAAjC,EAA8C,KAAKoK,cAAnD;AACA,QAAKmB,UAAL,CAAgBvL,gBAAhB,CAAiC,YAAjC,EAA+C,KAAKiL,eAApD;AACA,QAAKM,UAAL,CAAgBvL,gBAAhB,CAAiC,YAAjC,EAA+C,KAAKkL,eAApD;AACA,QAAKK,UAAL,CAAgBvL,gBAAhB,CAAiC,UAAjC,EAA6C,KAAK2B,aAAlD;AACA,QAAK6J,UAAL,CAAgBxL,gBAAhB,CAAiC,WAAjC,EAA8C,KAAKsK,cAAnD;AACA,QAAKkB,UAAL,CAAgBxL,gBAAhB,CAAiC,YAAjC,EAA+C,KAAKiL,eAApD;AACA,QAAKO,UAAL,CAAgBxL,gBAAhB,CAAiC,YAAjC,EAA+C,KAAKkL,eAApD;AACAjL,YAASD,gBAAT,CAA0B,WAA1B,EAAuC,KAAKmD,WAA5C;AACAgD,UAAOnG,gBAAP,CAAwB,SAAxB,EAAmC,KAAKgF,SAAxC;AACAmB,UAAOnG,gBAAP,CAAwB,MAAxB,EAAgC,KAAKiF,OAArC;AACA;;;yCAEsB;AACtB,QAAKmG,YAAL,CAAkBjL,mBAAlB,CAAsC,WAAtC,EAAmD,KAAK+J,gBAAxD;AACA,QAAKkB,YAAL,CAAkBjL,mBAAlB,CAAsC,YAAtC,EAAoD,KAAK8K,eAAzD;AACA,QAAKG,YAAL,CAAkBjL,mBAAlB,CAAsC,YAAtC,EAAoD,KAAK+K,eAAzD;AACA,QAAKK,UAAL,CAAgBpL,mBAAhB,CAAoC,WAApC,EAAiD,KAAKiK,cAAtD;AACA,QAAKmB,UAAL,CAAgBpL,mBAAhB,CAAoC,YAApC,EAAkD,KAAK8K,eAAvD;AACA,QAAKM,UAAL,CAAgBpL,mBAAhB,CAAoC,YAApC,EAAkD,KAAK+K,eAAvD;AACA,QAAKK,UAAL,CAAgBpL,mBAAhB,CAAoC,UAApC,EAAgD,KAAKwB,aAArD;AACA,QAAK6J,UAAL,CAAgBrL,mBAAhB,CAAoC,WAApC,EAAiD,KAAKmK,cAAtD;AACA,QAAKkB,UAAL,CAAgBrL,mBAAhB,CAAoC,YAApC,EAAkD,KAAK8K,eAAvD;AACA,QAAKO,UAAL,CAAgBrL,mBAAhB,CAAoC,YAApC,EAAkD,KAAK+K,eAAvD;AACAjL,YAASE,mBAAT,CAA6B,WAA7B,EAA0C,KAAKgD,WAA/C;AACAgD,UAAOhG,mBAAP,CAA2B,SAA3B,EAAsC,KAAK6E,SAA3C;AACAmB,UAAOhG,mBAAP,CAA2B,MAA3B,EAAmC,KAAK8E,OAAxC;AACA;;;2BAEQ;AAAA;;AACR;AACA,OAAMtB,SAAS,KAAKhE,KAAL,CAAWkE,IAAX,CAAgBF,MAAhB,GAAyB,KAAKhE,KAAL,CAAWwI,WAAnD;AACA,OAAMvE,SAAS,KAAKjE,KAAL,CAAWkE,IAAX,CAAgBD,MAAhB,GAAyB,KAAKjE,KAAL,CAAW0I,YAAnD;AACA,OAAM9E,OAAO,KAAK5D,KAAL,CAAWkE,IAAX,CAAgBN,IAAhB,GAAuB,KAAK5D,KAAL,CAAWwI,WAA/C;AACA,OAAM1E,OAAO,KAAK9D,KAAL,CAAWkE,IAAX,CAAgBJ,IAAhB,GAAuB,KAAK9D,KAAL,CAAW0I,YAA/C;AACA,OAAM7D,SAASjB,OAAOI,MAAtB;AACA,OAAMc,SAAShB,OAAOG,MAAtB;AACA,OAAM6H,SAAS9G,KAAK+D,KAAL,CAAWjE,MAAX,EAAmBD,MAAnB,CAAf;AACA,OAAMkH,QAAS7B,aAAalF,KAAKmE,GAAL,CAAS2C,MAAT,CAAd,GAAkC,GAAhD;AACA,OAAME,QAAS9B,aAAalF,KAAKiE,GAAL,CAAS6C,MAAT,CAAd,GAAkC,GAAhD;;AAEA,OAAI,KAAKhN,KAAL,CAAWwL,WAAX,IAA0B,KAAKtK,KAAL,CAAWwB,aAAX,CAAyBuB,MAAzB,IAAmC,CAAjE,EAAoE;AACnE,SAAKjE,KAAL,CAAWwL,WAAX,GAAyB,KAAzB;AACA;;AAED;AACA,OAAM9F,UAAU,CAACR,SAASJ,IAAV,IAAkB,CAAlC;AACA,OAAMa,UAAU,CAACR,SAASH,IAAV,IAAkB,CAAlC;AACA,OAAMmI,gBAAgBjH,KAAKkH,GAAL,CAASJ,MAAT,KAAoB3B,aAA1C;AACA,OAAMgC,UAAU,CAACF,gBAAgB,CAAC,CAAjB,GAAqB,CAAtB,IAA2BpE,UAA3B,GAAwC7C,KAAKmE,GAAL,CAAS2C,MAAT,CAAxD;AACA,OAAMM,UAAU,CAACH,gBAAgB,CAAhB,GAAoB,CAAC,CAAtB,IAA2BpE,UAA3B,GAAwC7C,KAAKiE,GAAL,CAAS6C,MAAT,CAAxD;AACA,OAAMlG,QAAQpB,UAAU2H,OAAxB;AACA,OAAMtG,QAAQpB,UAAU2H,OAAxB;AACA,OAAMC,aAAarH,KAAK+D,KAAL,CAAWqD,OAAX,EAAoBD,OAApB,IAA+BhC,aAAlD;;AAEA,OAAMrE,OAAO,KAAK9F,KAAL,CAAW+B,WAAX,CAAuB,KAAK/B,KAAL,CAAWkE,IAAlC,CAAb;AACA,OAAMoI,gBACL,sBAAsB,KAAKxN,KAAL,CAAWuL,QAAX,GAAsB,YAAtB,GAAqC,EAA3D,CADD;AAEA,OAAMkC,gBAAgB,KAAKzN,KAAL,CAAWwL,WAAX,GAAyB,eAAzB,GAA2C,OAAjE;AACA,OAAMkC,mBAAmB,KAAK1N,KAAL,CAAWwL,WAAX,GAAyB,eAAzB,GAA2C,EAApE;AACA,OAAMmC,mBAAmB,KAAK3N,KAAL,CAAWwL,WAAX,GACtB,eADsB,GAEtB,cAFH;AAGA,OAAMoC,aAAa;AAClB1C,UACC2C,OAAO7G,IAAP,IAAe,CAAf,GAAmB,SAAnB,GAA+B6G,OAAO7G,IAAP,IAAe,CAAf,GAAmB,SAAnB,GAA+B,SAF7C;AAGlBiE,YACC4C,OAAO7G,IAAP,IAAe,CAAf,GAAmB,SAAnB,GAA+B6G,OAAO7G,IAAP,IAAe,CAAf,GAAmB,SAAnB,GAA+B;AAJ7C,IAAnB;;AAOA,UACC;AAAA;AAAA,MAAK,WAAWwG,aAAhB,EAA+B,KAAK,aAAClN,CAAD;AAAA,aAAQ,OAAKsE,IAAL,GAAYtE,CAApB;AAAA,MAApC;AACC;AAAA;AAAA,OAAK,WAAU,iBAAf;AACC;AAAA;AAAA,QAAG,WAAU,eAAb;AACC;AACC,kBAAW,YAAYqN,gBADxB;AAEC,WAAIzI,MAFL;AAGC,WAAIC,MAHL;AAIC,WAAIL,IAJL;AAKC,WAAIE,IALL;AAMC,YAAK,aAAC1E,CAAD;AAAA,eAAQ,OAAKwM,UAAL,GAAkBxM,CAA1B;AAAA;AANN,QADD;AASC;AACC,kBAAW,aAAamN,aADzB;AAEC,cAAOG,UAFR;AAGC,WAAI1I,MAHL;AAIC,WAAIC,MAJL;AAKC,WAAIL,IALL;AAMC,WAAIE,IANL;AAOC,YAAK,aAAC1E,CAAD;AAAA,eAAQ,OAAKsM,OAAL,GAAetM,CAAvB;AAAA;AAPN;AATD,MADD;AAoBC;AAAA;AAAA,QAAG,WAAU,eAAb;AACC;AACC,kBAAU,uBADX;AAEC,WAAI4E,SAAS+H,KAFd;AAGC,WAAI9H,SAAS+H,KAHd;AAIC,WAAIhI,SAAS+H,KAJd;AAKC,WAAI9H,SAAS+H,KALd;AAMC,YAAK,aAAC5M,CAAD;AAAA,eAAQ,OAAKqM,YAAL,GAAoBrM,CAA5B;AAAA;AANN,QADD;AASC;AACC,kBAAW,oBAAoBoN,gBADhC;AAEC,cAAOE,UAFR;AAGC,WAAI1I,MAHL;AAIC,WAAIC,MAJL;AAKC,UAAG,CALJ;AAMC,YAAK,aAAC7E,CAAD;AAAA,eAAQ,OAAKoM,SAAL,GAAiBpM,CAAzB;AAAA;AANN;AATD,MApBD;AAsCC;AAAA;AAAA,QAAG,WAAU,eAAb;AACC;AACC,kBAAU,qBADX;AAEC,WAAIwE,OAAOmI,KAFZ;AAGC,WAAIjI,OAAOkI,KAHZ;AAIC,WAAIpI,OAAOmI,KAJZ;AAKC,WAAIjI,OAAOkI,KALZ;AAMC,YAAK,aAAC5M,CAAD;AAAA,eAAQ,OAAKyM,UAAL,GAAkBzM,CAA1B;AAAA;AANN,QADD;AASC;AACC,kBAAW,kBAAkBoN,gBAD9B;AAEC,cAAOE,UAFR;AAGC,WAAI9I,IAHL;AAIC,WAAIE,IAJL;AAKC,UAAG,CALJ;AAMC,YAAK,aAAC1E,CAAD;AAAA,eAAQ,OAAKuM,OAAL,GAAevM,CAAvB;AAAA;AANN;AATD;AAtCD,KADD;AA0DC;AAAC,yBAAD;AAAA;AACC,SAAG,CAAC4E,SAASJ,IAAV,IAAkB,CADtB;AAEC,SAAG,CAACK,SAASH,IAAV,IAAkB,CAFtB;AAGC,eAASiI,KAHV;AAIC,eAASC,KAJV;AAKC,cAAQK,UALT;AAMC,2BAAqB,KAAK1M,mBAN3B;AAOC,eAAS,KAAKb,KAAL,CAAWuL;AAPrB;AASC;AAAA;AAAA;AACC,kBAAW,qBAAqBmC,gBADjC;AAEC,YAAK,aAACpN,CAAD;AAAA,eAAQ,OAAK0G,IAAL,GAAY1G,CAApB;AAAA;AACL;AAHD;AAKE0G;AALF;AATD;AA1DD,IADD;AA8EA;;;;EA1J2C1E,oB;;kBAAxBgJ,e;;;;;;;;;;;;;;;;;ACPrB;;;;AACA;;AACA;;;;;;;;;;;;AAEA,IAAMwC,YAAY,CAAlB;AACA,IAAMC,aAAa,CAAnB;AACA,IAAMC,iBAAiB,EAAvB;AACA,IAAMC,kBAAkB,CAAxB;AACA,IAAMC,kBAAkB,GAAxB;AACA,IAAMC,mBAAmB,EAAzB;AACA,IAAMC,oBAAoB,CAA1B;AACA,IAAMC,oBAAoB,CAA1B;;IAEqBC,c;;;;;;;;;;;;;;sMACnBC,oB,GAAuB,K,QACvBvO,K,GAAQ;AACNwO,iBAAW,KADL;AAENC,iBAAW,KAFL;AAGNC,mBAAa,KAHP;AAINC,mBAAa,KAJP;AAKNC,mBAAa;AALP,K,QA8KRC,Q,GAAW,UAACC,MAAD,EAASC,MAAT,EAAiBC,CAAjB,EAAoBC,CAApB,EAAuBjC,MAAvB,EAA+BkC,MAA/B,EAAuC/E,GAAvC,EAA4CE,GAA5C,EAAoD;AAC7D,UAAMxI,IAAIiN,SAASI,SAAS/E,GAA5B;AACA,UAAMpI,IAAIgN,SAASG,SAAS7E,GAA5B;AACA,UAAM/B,eAAYzG,IAAImN,CAAhB,WAAqBjN,IAAIkN,CAAzB,YAAgCpN,CAAhC,SAAqCE,CAArC,YAA4CF,IAAImN,CAAhD,WAAqDjN,IAAIkN,CAAzD,QAAN;AACA,UAAME,kBAAmBnC,SAAS,GAAV,GAAiB9G,KAAKkC,EAA9C;AACA,UAAMgH,wBAAsBD,eAAtB,SAAyCtN,CAAzC,SAA8CE,CAA9C,MAAN;AACA,aAAO,EAAEuG,UAAF,EAAQ8G,oBAAR,EAAP;AACD,K,QAEDC,U,GAAa,YAAM;AACjB,UAAMC,UAAU,MAAK1K,IAAL,CAAUC,qBAAV,EAAhB;AACA,UAAMtE,UAAU,MAAKyG,IAAL,CAAUnC,qBAAV,EAAhB;;AAEA,YAAK0K,QAAL,CAAcC,YAAd,CAA2B,GAA3B,EAAgCjP,QAAQqB,IAAR,GAAe0N,QAAQ1N,IAAvD;AACA,YAAK2N,QAAL,CAAcC,YAAd,CAA2B,GAA3B,EAAgCjP,QAAQuB,GAAR,GAAcwN,QAAQxN,GAAtD;AACA,YAAKyN,QAAL,CAAcC,YAAd,CAA2B,OAA3B,EAAoCjP,QAAQkP,KAA5C;AACA,YAAKF,QAAL,CAAcC,YAAd,CAA2B,QAA3B,EAAqCjP,QAAQmP,MAA7C;AACD,K,QAEDC,e,GAAkB,iBAAS;AACzB,UAAI,MAAKzO,KAAL,CAAW8F,IAAX,CAAgBE,QAApB,EAA8B;AAC5BpG,cAAMG,eAAN;AACD,OAFD,MAEO,IAAIH,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AAC7B,cAAK6O,kBAAL,GAA0B,IAA1B;AACA9O,cAAME,cAAN;AACA,cAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACD;AACF,K,QAEDqL,e,GAAkB,iBAAS;AACzB,UAAI/O,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACtB,cAAK+O,kBAAL,GAA0B,IAA1B;AACAhP,cAAME,cAAN;AACA,cAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACA,YAAI,MAAKtD,KAAL,CAAW8F,IAAX,CAAgBE,QAApB,EAA8B;AAC5BpG,gBAAMG,eAAN;AACD;AACF;AACF,K,QAED8O,e,GAAkB,iBAAS;AACzB,UAAIjP,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACtB,cAAKiP,kBAAL,GAA0B,IAA1B;AACAlP,cAAME,cAAN;AACA,cAAKmI,WAAL,CAAiBrI,MAAMwD,OAAvB,EAAgCxD,MAAM0D,OAAtC;AACA,YAAI,MAAKtD,KAAL,CAAW8F,IAAX,CAAgBE,QAApB,EAA8B;AAC5BpG,gBAAMG,eAAN;AACD;AACF;AACF,K,QAEDkI,W,GAAc,UAACG,MAAD,EAASC,MAAT,EAAoB;AAChC,YAAKlF,aAAL,GAAqBiF,MAArB;AACA,YAAK/E,aAAL,GAAqBgF,MAArB;AACA,YAAK0G,WAAL,GAAmB,MAAK/O,KAAL,CAAW8F,IAA9B;AACA,YAAKkJ,aAAL,GAAqB,MAAKhP,KAAL,CAAW8F,IAAX,CAAgBN,MAAhB,GAAyB,MAAKxF,KAAL,CAAWwI,WAAzD;AACA,YAAKyG,aAAL,GAAqB,MAAKjP,KAAL,CAAW8F,IAAX,CAAgBL,MAAhB,GAAyB,MAAKzF,KAAL,CAAW0I,YAAzD;AACA,YAAKwG,YAAL,GAAoB,MAAKlP,KAAL,CAAW8F,IAAX,CAAgBF,KAAhB,GAAwB,MAAK5F,KAAL,CAAWwI,WAAvD;AACA,YAAK2G,YAAL,GAAoB,MAAKnP,KAAL,CAAW8F,IAAX,CAAgBD,KAAhB,GAAwB,MAAK7F,KAAL,CAAW0I,YAAvD;AACD,K,QAEDlF,W,GAAc;AAAA,aAAS,MAAK4F,MAAL,CAAYxJ,MAAMwD,OAAlB,EAA2BxD,MAAM0D,OAAjC,CAAT;AAAA,K,QAEd8F,M,GAAS,UAAChB,MAAD,EAASC,MAAT,EAAoB;AAC3B,UACE,CAAC,MAAKqG,kBAAL,IACC,MAAKE,kBADN,IAEC,MAAKE,kBAFP,KAGA,MAAK9O,KAAL,CAAW8F,IAAX,CAAgBE,QAJlB,EAKE;AACA,cAAKI,UAAL;AACD;;AAED,UACE,CAAC,MAAKsI,kBAAL,IACC,MAAKE,kBADN,IAEC,MAAKE,kBAFP,KAGA,CAAC,MAAKzF,YAJR,EAKE;AACA,cAAKA,YAAL,GAAoB,IAApB;AACA,cAAKC,gBAAL;AACD;;AAED,UAAI,MAAKwF,kBAAT,EAA6B;AAC3B,YAAMtJ,SAAS,MAAK3B,KAAL,CAAW,MAAKqH,aAAL,CAAmB,MAAK8D,aAAxB,EAAuC5G,MAAvC,CAAX,CAAf;AACA,YAAM3C,SAAS,MAAK5B,KAAL,CAAW,MAAKsH,aAAL,CAAmB,MAAK8D,aAAxB,EAAuC5G,MAAvC,CAAX,CAAf;AACA,cAAKrI,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAW8F,IAApC,IAA0CN,cAA1C,EAAkDC,cAAlD;AACD,OAJD,MAIO,IAAI,MAAKiJ,kBAAT,EAA6B;AAClC,YAAM9I,QAAQ,MAAK/B,KAAL,CAAW,MAAKqH,aAAL,CAAmB,MAAKgE,YAAxB,EAAsC9G,MAAtC,CAAX,CAAd;AACA,YAAMvC,QAAQ,MAAKhC,KAAL,CAAW,MAAKsH,aAAL,CAAmB,MAAKgE,YAAxB,EAAsC9G,MAAtC,CAAX,CAAd;AACA,cAAKrI,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAW8F,IAApC,IAA0CF,YAA1C,EAAiDC,YAAjD;AACD,OAJM,MAIA,IAAI,MAAK+I,kBAAT,EAA6B;AAClC,YAAIpJ,UAAS,MAAK0F,aAAL,CAAmB,MAAK8D,aAAxB,EAAuC5G,MAAvC,CAAb;AACA,YAAI3C,UAAS,MAAK0F,aAAL,CAAmB,MAAK8D,aAAxB,EAAuC5G,MAAvC,CAAb;AACA,YAAIzC,SAAQ,MAAKsF,aAAL,CAAmB,MAAKgE,YAAxB,EAAsC9G,MAAtC,CAAZ;AACA,YAAIvC,SAAQ,MAAKsF,aAAL,CAAmB,MAAKgE,YAAxB,EAAsC9G,MAAtC,CAAZ;AACA,YAAMxD,SAASe,SAAQJ,OAAvB;AACA,YAAMV,SAASe,SAAQJ,OAAvB;;AAEA,YAAID,UAAS,CAAb,EAAgB;AACdA,oBAAS,CAAT;AACAI,mBAAQf,MAAR;AACD,SAHD,MAGO,IAAIW,UAAS,CAAb,EAAgB;AACrBA,oBAAS,CAAT;AACAI,mBAAQ,IAAIf,MAAZ;AACD;AACD,YAAIY,UAAS,CAAb,EAAgB;AACdA,oBAAS,CAAT;AACAI,mBAAQf,MAAR;AACD,SAHD,MAGO,IAAIW,UAAS,CAAb,EAAgB;AACrBA,oBAAS,CAAT;AACAI,mBAAQ,IAAIf,MAAZ;AACD;AACD,YAAIc,SAAQ,CAAZ,EAAe;AACbJ,oBAAS,CAACX,MAAV;AACAe,mBAAQ,CAAR;AACD,SAHD,MAGO,IAAIA,SAAQ,CAAZ,EAAe;AACpBJ,oBAAS,IAAIX,MAAb;AACAe,mBAAQ,CAAR;AACD;AACD,YAAIC,SAAQ,CAAZ,EAAe;AACbJ,oBAAS,CAACX,MAAV;AACAe,mBAAQ,CAAR;AACD,SAHD,MAGO,IAAIA,SAAQ,CAAZ,EAAe;AACpBJ,oBAAS,IAAIX,MAAb;AACAe,mBAAQ,CAAR;AACD;AACD,cAAK7F,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAW8F,IAApC,IAA0CN,eAA1C,EAAkDC,eAAlD,EAA0DG,aAA1D,EAAiEC,aAAjE;AACD;AACF,K,QAEDqF,a,GAAgB,UAACE,QAAD,EAAWhI,OAAX;AAAA,aACd,CAACgI,WAAWhI,OAAX,GAAqB,MAAKD,aAA3B,IAA4C,MAAKnD,KAAL,CAAWwI,WADzC;AAAA,K,QAGhB2C,a,GAAgB,UAACE,QAAD,EAAW/H,OAAX;AAAA,aACd,CAAC+H,WAAW/H,OAAX,GAAqB,MAAKD,aAA3B,IAA4C,MAAKrD,KAAL,CAAW0I,YADzC;AAAA,K,QAGhBrD,S,GAAY;AAAA,aAAS,MAAKC,OAAL,EAAT;AAAA,K,QAEZA,O,GAAU,YAAM;AACd,UAAI,MAAK+D,YAAT,EAAuB;AACrB,cAAKC,gBAAL;AACA,cAAKD,YAAL,GAAoB,KAApB;AACD;;AAED,UAAMK,mBACJ,MAAKgF,kBAAL,IACA,MAAKE,kBADL,IAEA,MAAKE,kBAHP;AAIA,UAAI,MAAKJ,kBAAT,EAA6B;AAC3B,cAAKA,kBAAL,GAA0B,KAA1B;AACD;AACD,UAAI,MAAKE,kBAAT,EAA6B;AAC3B,cAAKA,kBAAL,GAA0B,KAA1B;AACD;AACD,UAAI,MAAKE,kBAAT,EAA6B;AAC3B,cAAKA,kBAAL,GAA0B,KAA1B;AACD;AACD,UAAIpF,oBAAoB,MAAKC,eAAL,EAAxB,EAAgD;AAC9C,cAAK3J,KAAL,CAAWkC,QAAX,CAAoB,MAAKlC,KAAL,CAAW8F,IAA/B;AACD;AACF,K,QAED6D,e,GAAkB;AAAA,aAChB,MAAK3J,KAAL,CAAW8F,IAAX,CAAgBN,MAAhB,KAA2B,MAAKuJ,WAAL,CAAiBvJ,MAA5C,IACA,MAAKxF,KAAL,CAAW8F,IAAX,CAAgBL,MAAhB,KAA2B,MAAKsJ,WAAL,CAAiBtJ,MAD5C,IAEA,MAAKzF,KAAL,CAAW8F,IAAX,CAAgBF,KAAhB,KAA0B,MAAKmJ,WAAL,CAAiBnJ,KAF3C,IAGA,MAAK5F,KAAL,CAAW8F,IAAX,CAAgBD,KAAhB,KAA0B,MAAKkJ,WAAL,CAAiBlJ,KAJ3B;AAAA,K,QAMlByD,gB,GAAmB,YAAM;AACvB,YAAKM,2BAAL,GAAmCE,MAAnC,CAA0C,aAA1C;AACA,UAAI,MAAK4E,kBAAT,EAA6B;AAC3B,cAAK9E,2BAAL,GAAmCE,MAAnC,CAA0C,cAA1C;AACA,cAAK5K,QAAL,cAAmB,MAAKJ,KAAxB,IAA+B4O,aAAa,CAAC,MAAK5O,KAAL,CAAW4O,WAAxD;AACD,OAHD,MAGO,IAAI,MAAKkB,kBAAT,EAA6B;AAClC,cAAKhF,2BAAL,GAAmCE,MAAnC,CAA0C,oBAA1C;AACA,cAAK5K,QAAL,cAAmB,MAAKJ,KAAxB,IAA+B0O,aAAa,CAAC,MAAK1O,KAAL,CAAW0O,WAAxD;AACD,OAHM,MAGA,IAAI,MAAKsB,kBAAT,EAA6B;AAClC,cAAKlF,2BAAL,GAAmCE,MAAnC,CAA0C,oBAA1C;AACA,cAAK5K,QAAL,cAAmB,MAAKJ,KAAxB,IAA+B2O,aAAa,CAAC,MAAK3O,KAAL,CAAW2O,WAAxD;AACD;AACF,K,QAED2B,gB,GAAmB;AAAA,aAAS,MAAKlQ,QAAL,cAAmB,MAAKJ,KAAxB,IAA+BwO,WAAW,IAA1C,IAAT;AAAA,K,QAEnB+B,gB,GAAmB;AAAA,aACjB,MAAKnQ,QAAL,cAAmB,MAAKJ,KAAxB,IAA+BwO,WAAW,KAA1C,IADiB;AAAA,K,QAGnBgC,gB,GAAmB;AAAA,aAAS,MAAKpQ,QAAL,cAAmB,MAAKJ,KAAxB,IAA+ByO,WAAW,IAA1C,IAAT;AAAA,K,QAEnBgC,gB,GAAmB;AAAA,aACjB,MAAKrQ,QAAL,cAAmB,MAAKJ,KAAxB,IAA+ByO,WAAW,KAA1C,IADiB;AAAA,K,QAGnB3D,2B,GAA8B;AAAA,aAAM,MAAKlG,IAAL,CAAUmG,aAAV,CAAwB1F,SAA9B;AAAA,K,QAE9BN,K,GAAQ;AAAA,aAASmB,KAAKkB,GAAL,CAAS,CAAT,EAAYlB,KAAKC,GAAL,CAAS,CAAT,EAAYkB,KAAZ,CAAZ,CAAT;AAAA,K,QAERnE,a,GAAgB,iBAAS;AACvB,UAAIpC,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACtBD,cAAME,cAAN;AACA,cAAK0P,SAAL;AACD;AACF,K,QAEDC,Y,GAAe,uBAAe;AAC5B,UAAI,MAAKpC,oBAAT,EAA+B;AAC7B,cAAKrN,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAW8F,IAApC,IAA0CC,wBAA1C;AACD;AACF,K,QAEDyJ,S,GAAY,YAAM;AAChB,UAAI,CAAC,MAAKxP,KAAL,CAAW8F,IAAX,CAAgBE,QAArB,EAA+B;AAC7B,cAAK0J,uBAAL,GAA+B,MAAK1P,KAAL,CAAW8F,IAAX,CAAgBC,WAAhB,CAA4B4J,iBAA5B,EAA/B;AACA,cAAKC,YAAL,CAAkB,IAAlB;AACD;AACF,K,QAEDxJ,U,GAAa,YAAM;AACjB,UAAI,MAAKpG,KAAL,CAAW8F,IAAX,CAAgBE,QAApB,EAA8B;AAC5B,cAAK4J,YAAL,CAAkB,KAAlB;AACA,YACE,MAAKF,uBAAL,KACA,MAAK1P,KAAL,CAAW8F,IAAX,CAAgBC,WAAhB,CAA4B4J,iBAA5B,EAFF,EAGE;AACA,gBAAK3P,KAAL,CAAWkC,QAAX,CAAoB,MAAKlC,KAAL,CAAW8F,IAA/B;AACD;AACF;AACF,K,QAED8J,Y,GAAe,oBAAY;AACzB,YAAKvC,oBAAL,GAA4BrH,QAA5B;AACA;AACA,UAAMD,cAAcM,qBAAYC,cAAZ,CAClBD,qBAAYE,kBAAZ,CAA+B,MAAKvG,KAAL,CAAW8F,IAAX,CAAgBC,WAA/C,CADkB,CAApB;AAGA,YAAK/F,KAAL,CAAWiC,QAAX,cAAyB,MAAKjC,KAAL,CAAW8F,IAApC,IAA0CC,wBAA1C,EAAuDC,kBAAvD;AACD,K,QAEDxG,iB,GAAoB,iBAAS;AAC3B,UACE,MAAKQ,KAAL,CAAW8F,IAAX,CAAgBE,QAAhB,KACCpG,MAAMF,OAAN,KAAkB,EAAlB,IAAyBE,MAAMF,OAAN,KAAkB,EAAlB,IAAwB,CAACE,MAAMiQ,QADzD,CADF,EAGE;AACAjQ,cAAMG,eAAN;AACA,cAAKqG,UAAL;AACD;AACF,K,QAEDzG,mB,GAAsB;AAAA,aAAM,MAAKK,KAAL,CAAWL,mBAAX,CAA+B,MAAKK,KAAL,CAAW8F,IAA1C,CAAN;AAAA,K;;;;;wCA9ZF;AAClB,WAAKA,IAAL,CAAUzF,gBAAV,CAA2B,WAA3B,EAAwC,KAAKoO,eAA7C;AACA,WAAKqB,WAAL,CAAiBzP,gBAAjB,CAAkC,WAAlC,EAA+C,KAAKsO,eAApD;AACA,WAAKmB,WAAL,CAAiBzP,gBAAjB,CAAkC,YAAlC,EAAgD,KAAK+O,gBAArD;AACA,WAAKU,WAAL,CAAiBzP,gBAAjB,CAAkC,YAAlC,EAAgD,KAAKgP,gBAArD;AACA,WAAKU,WAAL,CAAiB1P,gBAAjB,CAAkC,WAAlC,EAA+C,KAAKwO,eAApD;AACA,WAAKkB,WAAL,CAAiB1P,gBAAjB,CAAkC,YAAlC,EAAgD,KAAKiP,gBAArD;AACA,WAAKS,WAAL,CAAiB1P,gBAAjB,CAAkC,YAAlC,EAAgD,KAAKkP,gBAArD;AACA,WAAK7L,IAAL,CAAUrD,gBAAV,CAA2B,UAA3B,EAAuC,KAAK2B,aAA5C;AACA1B,eAASD,gBAAT,CAA0B,WAA1B,EAAuC,KAAKmD,WAA5C;AACAlD,eAASD,gBAAT,CAA0B,SAA1B,EAAqC,KAAKb,iBAA1C,EAA6D,IAA7D;AACAgH,aAAOnG,gBAAP,CAAwB,SAAxB,EAAmC,KAAKgF,SAAxC;AACAmB,aAAOnG,gBAAP,CAAwB,MAAxB,EAAgC,KAAKiF,OAArC;AACA,WAAK6I,UAAL;;AAEA,UAAI,KAAKnO,KAAL,CAAW8F,IAAX,CAAgBE,QAApB,EAA8B;AAC5B,aAAKqH,oBAAL,GAA4B,IAA5B;AACA,aAAK2C,MAAL,CAAYC,KAAZ;AACD;AACF;;;2CAEsB;AACrB,WAAKnK,IAAL,CAAUtF,mBAAV,CAA8B,WAA9B,EAA2C,KAAKiO,eAAhD;AACA,WAAKqB,WAAL,CAAiBtP,mBAAjB,CAAqC,WAArC,EAAkD,KAAKmO,eAAvD;AACA,WAAKmB,WAAL,CAAiBtP,mBAAjB,CAAqC,YAArC,EAAmD,KAAK4O,gBAAxD;AACA,WAAKU,WAAL,CAAiBtP,mBAAjB,CAAqC,YAArC,EAAmD,KAAK6O,gBAAxD;AACA,WAAKU,WAAL,CAAiBvP,mBAAjB,CAAqC,WAArC,EAAkD,KAAKqO,eAAvD;AACA,WAAKkB,WAAL,CAAiBvP,mBAAjB,CAAqC,YAArC,EAAmD,KAAK8O,gBAAxD;AACA,WAAKS,WAAL,CAAiBvP,mBAAjB,CAAqC,YAArC,EAAmD,KAAK+O,gBAAxD;AACA,WAAK7L,IAAL,CAAUlD,mBAAV,CAA8B,UAA9B,EAA0C,KAAKwB,aAA/C;AACA,WAAK0B,IAAL,CAAUlD,mBAAV,CAA8B,YAA9B,EAA4C,KAAK0P,gBAAjD;AACA5P,eAASE,mBAAT,CAA6B,WAA7B,EAA0C,KAAKgD,WAA/C;AACAlD,eAASE,mBAAT,CAA6B,SAA7B,EAAwC,KAAKhB,iBAA7C,EAAgE,IAAhE;AACAgH,aAAOhG,mBAAP,CAA2B,SAA3B,EAAsC,KAAK6E,SAA3C;AACAmB,aAAOhG,mBAAP,CAA2B,MAA3B,EAAmC,KAAK8E,OAAxC;AACD;;;yCAEoB;AACnB,WAAK6I,UAAL;AACA,UAAI,CAAC,KAAKnO,KAAL,CAAW8F,IAAX,CAAgBE,QAArB,EAA+B;AAC7B,aAAKqH,oBAAL,GAA4B,KAA5B;AACD;AACF;;;6BAEQ;AAAA;;AACP,UAAMO,SAAS,KAAK5N,KAAL,CAAW8F,IAAX,CAAgBN,MAAhB,GAAyB,KAAKxF,KAAL,CAAWwI,WAAnD;AACA,UAAMqF,SAAS,KAAK7N,KAAL,CAAW8F,IAAX,CAAgBL,MAAhB,GAAyB,KAAKzF,KAAL,CAAW0I,YAAnD;AACA,UAAM9C,QAAQ,KAAK5F,KAAL,CAAW8F,IAAX,CAAgBF,KAAhB,GAAwB,KAAK5F,KAAL,CAAWwI,WAAjD;AACA,UAAM3C,QAAQ,KAAK7F,KAAL,CAAW8F,IAAX,CAAgBD,KAAhB,GAAwB,KAAK7F,KAAL,CAAW0I,YAAjD;AACA,UAAMoD,SAAS9G,KAAK+D,KAAL,CAAW6E,SAAShI,KAApB,EAA2BC,QAAQgI,MAAnC,IAA6C7I,KAAKkC,EAAL,GAAU,CAAtE;AACA,UAAM+B,MAAMjE,KAAKiE,GAAL,CAAS6C,MAAT,CAAZ;AACA,UAAM3C,MAAMnE,KAAKmE,GAAL,CAAS2C,MAAT,CAAZ;;AAEA,UAAMqE,WAAWvC,SAAS,CAAChB,YAAY,CAAb,IAAkB3D,GAA5C;AACA,UAAMmH,WAAWvC,SAAS,CAACjB,YAAY,CAAb,IAAkBzD,GAA5C;AACA,UAAMzB,YACJ,gBACC,KAAK5I,KAAL,CAAWwO,SAAX,GAAuB,QAAvB,GAAkC,EADnC,KAEC,KAAKxO,KAAL,CAAW0O,WAAX,GAAyB,UAAzB,GAAsC,EAFvC,CADF;AAIA;AACA,UAAM6C,0BAAwBzK,KAAxB,SAAiCC,KAAjC,WAA4CsK,QAA5C,SAAwDC,QAA9D;;AAEA,UAAME,iBACJ,KAAKxR,KAAL,CAAWwO,SAAX,IACA,KAAKxO,KAAL,CAAWyO,SADX,IAEA,KAAKzO,KAAL,CAAW0O,WAFX,IAGA,KAAK1O,KAAL,CAAW2O,WAJb;AAKA,UAAMsC,cAAc,KAAKpC,QAAL,CAClBC,MADkB,EAElBC,MAFkB,EAGlBZ,gBAHkB,EAIlBC,iBAJkB,EAKlBpB,MALkB,EAMlBqB,iBANkB,EAOlBlE,GAPkB,EAQlBE,GARkB,CAApB;AAUA,UAAMoH,OAAOD,iBACT,KAAK3C,QAAL,CACEC,MADF,EAEEC,MAFF,EAGEf,cAHF,EAIEC,eAJF,EAKEjB,MALF,EAMEkB,eANF,EAOE/D,GAPF,EAQEE,GARF,CADS,GAWT,KAAKwE,QAAL,CAAcC,MAAd,EAAsBC,MAAtB,EAA8BjB,SAA9B,EAAyCC,UAAzC,EAAqDf,MAArD,EAA6D,CAA7D,EAAgE,CAAhE,EAAmE,CAAnE,CAXJ;;AAaA,UAAM/F,cAAc,KAAK/F,KAAL,CAAW8F,IAAX,CAAgBC,WAApC;AACA,UAAMyK,UACJzK,eAAe,IAAf,IACAA,YAAY4J,iBAAZ,MAAmC,IADnC,IAEA5J,YAAY4J,iBAAZ,GAAgCa,OAAhC,EAHF;AAIA,UAAMC,cAAcD,WAAW,KAAKxQ,KAAL,CAAW8F,IAAX,CAAgBE,QAA/C;AACA,UAAMyB,YACJ,qBACC,CAAC+I,OAAD,GAAW,UAAX,GAAwB,EADzB,KAEC,KAAKxQ,KAAL,CAAW8F,IAAX,CAAgBE,QAAhB,GAA2B,WAA3B,GAAyC,EAF1C,CADF;;AAKA,UAAM0K,0BAAwB,KAAK1Q,KAAL,CAAW8F,IAAX,CAAgBlE,EAA9C;AACA,UAAM+O,WAAWF,cAAc,UAAUC,UAAV,GAAuB,GAArC,GAA2C,EAA5D;;AAEA,UAAME,mBACJ,wBAAwB,KAAK9R,KAAL,CAAW0O,WAAX,GAAyB,UAAzB,GAAsC,EAA9D,CADF;AAEA,UAAMqD,mBACJ,wBAAwB,KAAK/R,KAAL,CAAW2O,WAAX,GAAyB,UAAzB,GAAsC,EAA9D,CADF;;AAGA,aACE;AAAA;AAAA,UAAK,WAAWhG,SAAhB,EAA2B,KAAK;AAAA,mBAAM,OAAK/D,IAAL,GAAYtE,CAAlB;AAAA,WAAhC;AACE;AAAA;AAAA,YAAK,WAAU,iBAAf;AACE;AAAA;AAAA;AACE;AAAA;AAAA,gBAAM,IAAIsR,UAAV;AACE,sDAAM,GAAE,GAAR,EAAY,GAAE,GAAd,EAAkB,OAAM,MAAxB,EAA+B,QAAO,MAAtC,EAA6C,MAAK,OAAlD,GADF;AAEE,sDAAM,MAAK,OAAX,EAAmB,KAAK;AAAA,yBAAM,OAAKrC,QAAL,GAAgBjP,CAAtB;AAAA,iBAAxB;AAFF;AADF,WADF;AAOE;AACE,uBAAWwR,gBADb;AAEE,gBAAIT,QAFN;AAGE,gBAAIC,QAHN;AAIE,gBAAIxK,KAJN;AAKE,gBAAIC,KALN;AAME,iBAAK;AAAA,qBAAM,OAAKiK,WAAL,GAAmB1Q,CAAzB;AAAA;AANP,YAPF;AAeE;AACE,uBAAWyR,gBADb;AAEE,eAAGd,YAAY3I,IAFjB;AAGE,uBAAW2I,YAAY7B,SAHzB;AAIE,iBAAK;AAAA,qBAAM,OAAK6B,WAAL,GAAmB3Q,CAAzB;AAAA;AAJP,YAfF;AAqBE;AACE,uBAAU,YADZ;AAEE,eAAGmR,KAAKnJ,IAFV;AAGE,uBAAWmJ,KAAKrC,SAHlB;AAIE,iBAAK;AAAA,qBAAM,OAAKqC,IAAL,GAAYnR,CAAlB;AAAA;AAJP,YArBF;AA2BE;AACE,uBAAWsI,SADb;AAEE,eAAG2I,QAFL;AAGE,iBAAK;AAAA,qBAAM,OAAKnM,IAAL,GAAY9E,CAAlB;AAAA,aAHP;AAIE,kBAAMuR;AAJR;AA3BF,SADF;AAmCE;AAAC,8BAAD;AAAA;AACE,eAAG/K,KADL;AAEE,eAAGC,KAFL;AAGE,iCAAqB,KAAKlG;AAH5B;AAKE;AAAA;AAAA,cAAK,WAAU,MAAf,EAAsB,KAAK;AAAA,uBAAM,OAAKmG,IAAL,GAAY1G,CAAlB;AAAA,eAA3B;AACE,0CAAC,eAAD;AACE,2BACE2G,cAAcA,WAAd,GAA4BM,qBAAYyK,WAAZ,EAFhC;AAIE,wBAAU,CAAC,KAAK9Q,KAAL,CAAW8F,IAAX,CAAgBE,QAJ7B;AAKE,wBAAU,KAAKyJ,YALjB;AAME,sBAAQ,KAAKrJ,UANf;AAOE,mBAAK;AAAA,uBAAM,OAAK4J,MAAL,GAAc5Q,CAApB;AAAA;AAPP;AADF;AALF;AAnCF,OADF;AAuDD;;;;EA9KyCgC,oB;;kBAAvBgM,c;;;;;;;;;ACbrB;;;;AACA;;;;AACA;;;;AAEA2D,OAAOC,OAAP,GAAiB;AACftK,8CADe;AAEfrF,sDAFe;AAGfyF,wDAHe;AAIfG;AAJe,CAAjB,C;;;;;;ACJA,2BAA2B,mBAAO,CAAC,CAAkD;AACrF;;;AAGA;AACA,cAAc,QAAS,mEAAmE,uBAAuB,gBAAgB,iBAAiB,aAAa,cAAc,GAAG,yEAAyE,uBAAuB,kBAAkB,iBAAiB,aAAa,eAAe,eAAe,6BAA6B,GAAG,iIAAiI,eAAe,GAAG,2CAA2C,yCAAyC,qBAAqB,cAAc,iBAAiB,iBAAiB,oBAAoB,kBAAkB,GAAG,+FAA+F,4CAA4C,GAAG,mDAAmD,+CAA+C,GAAG,qCAAqC,kBAAkB,eAAe,oBAAoB,GAAG,oEAAoE,iBAAiB,gBAAgB,GAAG;;AAE3oC;;;;;;;ACPA,2BAA2B,mBAAO,CAAC,CAAqD;AACxF;;;AAGA;AACA,cAAc,QAAS,wEAAwE,uBAAuB,gBAAgB,iBAAiB,aAAa,cAAc,kBAAkB,oBAAoB,GAAG,mFAAmF,uBAAuB,gBAAgB,iBAAiB,GAAG,8HAA8H,mBAAmB,GAAG,qCAAqC,eAAe,gBAAgB,sBAAsB,GAAG,kCAAkC,iBAAiB,GAAG,gDAAgD,kBAAkB,yCAAyC,GAAG,2IAA2I,4CAA4C,GAAG,mNAAmN,4CAA4C,GAAG,qOAAqO,mBAAmB,GAAG,0JAA0J,sBAAsB,yBAAyB,eAAe,GAAG,kCAAkC,iBAAiB,GAAG,uBAAuB,uBAAuB,qBAAqB,qBAAqB,oBAAoB,2IAA2I,MAAM,kMAAkM,uBAAuB,kCAAkC,GAAG,4BAA4B,uBAAuB,qBAAqB,GAAG,4SAA4S,sBAAsB,GAAG,kDAAkD,+GAA+G,GAAG,sDAAsD,qBAAqB,uBAAuB,GAAG,2CAA2C,uBAAuB,GAAG,oDAAoD,wBAAwB,GAAG,6GAA6G,wBAAwB,uBAAuB,yBAAyB,GAAG,uFAAuF,2BAA2B,GAAG,yCAAyC,wBAAwB,uBAAuB,eAAe,GAAG,uCAAuC,sBAAsB,iBAAiB,GAAG,0CAA0C,wBAAwB,sBAAsB,GAAG,mGAAmG,gKAAgK,kBAAkB,wBAAwB,4BAA4B,GAAG,uCAAuC,uBAAuB,kBAAkB,qCAAqC,GAAG,4CAA4C,uBAAuB,iBAAiB,kCAAkC,qBAAqB,uBAAuB,kBAAkB,gBAAgB,iBAAiB,WAAW,cAAc,eAAe,yDAAyD,GAAG,gDAAgD,uBAAuB,aAAa,cAAc,qCAAqC,gBAAgB,iBAAiB,GAAG,qHAAqH,kCAAkC,8BAA8B,GAAG,iDAAiD,wBAAwB,sBAAsB,2BAA2B,eAAe,4BAA4B,GAAG,uHAAuH,wBAAwB,GAAG,0RAA0R,oBAAoB,GAAG,kbAAkb,oBAAoB,GAAG,qCAAqC,iBAAiB,GAAG,6NAA6N,yBAAyB,GAAG,4CAA4C,4BAA4B,GAAG,uxBAAuxB,yBAAyB,GAAG,2mBAA2mB,yBAAyB,GAAG;;AAE5/O;;;;;;;ACPA;;AAEA;AACA,cAAc,mBAAO,CAAC,EAAoE;AAC1F,4CAA4C,QAAS;AACrD;AACA;;AAEA,eAAe;AACf;AACA;AACA,aAAa,mBAAO,CAAC,CAAsD;AAC3E;AACA;AACA,GAAG,KAAU;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;ACzBA;;AAEA;AACA,cAAc,mBAAO,CAAC,EAA2E;AACjG,4CAA4C,QAAS;AACrD;AACA;;AAEA,eAAe;AACf;AACA;AACA,aAAa,mBAAO,CAAC,CAAyD;AAC9E;AACA;AACA,GAAG,KAAU;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA","file":"lib/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3e779a767d7f54e8fdd5","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","import React, { PureComponent } from \"react\";\n\nexport default class TextAnchor extends PureComponent {\n\tstate = { buttonShowing: false, justCreated: true };\n\n\tcomponentDidMount() {\n\t\tthis.mounted = true;\n\t\tconsole.log(this.props.lengthX);\n\t\tthis.textBox.addEventListener(\"click\", this.onClick);\n\t\tdocument.addEventListener(\"mousedown\", this.onDocumentMouseDown);\n\t\tdocument.addEventListener(\"keydown\", this.onDocumentKeyDown);\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.mounted) {\n\t\t\t\tthis.setState({ ...this.state, justCreated: false });\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.mounted = false;\n\t\tthis.textBox.removeEventListener(\"click\", this.onClick);\n\t\tdocument.removeEventListener(\"mousedown\", this.onDocumentMouseDown);\n\t\tdocument.removeEventListener(\"keydown\", this.onDocumentKeyDown);\n\t}\n\n\trender() {\n\t\tconst textAnchorStyle = {\n\t\t\tleft: this.props.x + \"px\",\n\t\t\ttop: this.props.y + \"px\",\n\t\t\ttransformOrigin: \"0,0\",\n\t\t\tvisibility: this.props.visible ? \"visible\" : \"hidden\",\n\t\t};\n\n\t\tconst className =\n\t\t\t\"text-anchor\" +\n\t\t\t(this.state.buttonShowing ? \" button-showing\" : \"\") +\n\t\t\t(this.state.justCreated ? \" just-created\" : \"\");\n\n\t\treturn (\n\t\t\t<div className={className} style={textAnchorStyle}>\n\t\t\t\t<div className=\"text-box\" ref={(e) => (this.textBox = e)}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"delete-button\"\n\t\t\t\t\t\tonClick={this.onDeleteButtonClick}\n\t\t\t\t\t\t// Additional mouse-down handler means delete works cleanly if text is being edited:\n\t\t\t\t\t\tonMouseDown={this.onDeleteButtonClick}\n\t\t\t\t\t\tref={(e) => (this.deleteButton = e)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg className=\"delete-button-svg\">\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tclassName=\"delete-button-icon\"\n\t\t\t\t\t\t\t\td=\"M 4 4 L 11 11 M 11 4 L 4 11\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tonClick = () => this.setState({ ...this.state, buttonShowing: true });\n\n\tonDocumentMouseDown = (e) => {\n\t\tif (!this.textBox.contains(e.target)) {\n\t\t\tthis.setState({ ...this.state, buttonShowing: false });\n\t\t}\n\t};\n\n\tonDocumentKeyDown = (e) => {\n\t\tif (e.key === \"Escape\" || e.keyCode === 27) {\n\t\t\tthis.setState({ ...this.state, buttonShowing: false });\n\t\t}\n\t};\n\n\tonDeleteButtonClick = (event) => {\n\t\tif (event.button === 0) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.props.onDeleteButtonClick();\n\t\t}\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/core/TextAnchor.js","import React, { PureComponent } from \"react\";\nimport LineMeasurement from \"./LineMeasurement\";\nimport CircleMeasurement, { minRadiusInPx } from \"./CircleMeasurement\";\nimport TextAnnotation from \"./TextAnnotation\";\nimport { EditorState } from \"draft-js\";\nimport \"./MeasurementLayerBase.css\";\n\nexport default class MeasurementLayerBase extends PureComponent {\n  createdId = null;\n  enabled = true;\n  doubleClicked = [];\n\n  componentDidMount() {\n    this.root.addEventListener(\"mousedown\", this.onMouseDown);\n    this.root.addEventListener(\"click\", this.onClick);\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    window.addEventListener(\"mouseup\", this.onMouseUp);\n    window.addEventListener(\"blur\", this.endDrag);\n    window.addEventListener(\"keydown\", this.keydown);\n\n    if (this.props.event) {\n      this.onMouseDown(event)\n    }\n  }\n\n  componentWillUnmount() {\n    this.root.removeEventListener(\"mousedown\", this.onMouseDown);\n    this.root.removeEventListener(\"click\", this.onClick);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    window.removeEventListener(\"mouseup\", this.onMouseUp);\n    window.removeEventListener(\"blur\", this.endDrag);\n    window.removeEventListener(\"keydown\", this.keydown);\n  }\n\n  render() {\n    const className =\n      \"measurement-layer-base\" + (this.props.mode ? \" any-mode-on\" : \"\");\n\n    if (this.props.disabled) {\n      this.doubleClicked = [];\n      this.enabled = true;\n    }\n\n    return (\n      <div className={className} ref={e => (this.root = e)}>\n        {this.props.measurements.map(this.createMeasurementComponent)}\n      </div>\n    );\n  }\n\n  createMeasurementComponent = measurement => {\n    if (measurement.type === \"line\") {\n      return (\n        <LineMeasurement\n          doubleClicked={this.doubleClicked}\n          key={measurement.id}\n          line={measurement}\n          parentWidth={this.props.widthInPx}\n          parentHeight={this.props.heightInPx}\n          measureLine={this.props.measureLine}\n          onDoubleClick={this.onDoubleClick}\n          onChange={this.onChange}\n          onCommit={this.props.onCommit}\n          onDeleteButtonClick={this.delete}\n          onMidMouse={this.onMidMouse}\n        />\n      );\n    } else if (measurement.type === \"circle\") {\n      return (\n        <CircleMeasurement\n          key={measurement.id}\n          circle={measurement}\n          parentWidth={this.props.widthInPx}\n          parentHeight={this.props.heightInPx}\n          measureCircle={this.props.measureCircle}\n          onChange={this.onChange}\n          onCommit={this.props.onCommit}\n          onDeleteButtonClick={this.delete}\n        />\n      );\n    } else if (measurement.type === \"text\") {\n      return (\n        <TextAnnotation\n          key={measurement.id}\n          text={measurement}\n          parentWidth={this.props.widthInPx}\n          parentHeight={this.props.heightInPx}\n          onChange={this.onChange}\n          onCommit={this.props.onCommit}\n          onDeleteButtonClick={this.delete}\n        />\n      );\n    } else {\n      return false;\n    }\n  };\n\n  keydown = (e) => {\n    // delete key\n    if (e.keyCode == 8) {\n      this.props.onChange(this.props.measurements.filter(n => {\n        return !this.doubleClicked.includes(n.id)\n      }))\n      this.doubleClicked = [];\n      this.enabled = true;\n    }\n  }\n\n  onDoubleClick = (enable, m) => {\n    if (enable) {\n      this.doubleClicked.push(m.id)\n    } else {\n      this.doubleClicked = this.doubleClicked.filter(n => n !== m.id);\n    }\n  }\n\n  onMouseDown = event => {\n    if (this.doubleClicked.length > 0) {\n      return;\n    }\n\n    this.finishAnyTextEdit();\n    if (event.button === 0 && this.enabled) {\n      if (this.props.mode === \"line\" || this.props.mode === null) {\n        event.preventDefault();\n        this.lineCreationInProgress = true;\n        this.mouseXAtPress = event.clientX;\n        this.mouseYAtPress = event.clientY;\n      } else if (this.props.mode === \"circle\") {\n        event.preventDefault();\n        this.circleCreationInProgress = true;\n        this.mouseXAtPress = event.clientX;\n        this.mouseYAtPress = event.clientY;\n      }\n    }\n  };\n\n  onMidMouse = state => {\n    if (this.doubleClicked.length > 0) {\n      return;\n    }\n    if (state == \"enter\") {\n      this.enabled = false;\n    } else {\n      this.enabled = true;\n    }\n  }\n\n  onMouseMove = event => {\n    if (this.doubleClicked.length > 0) {\n      return;\n    }\n    if (this.lineCreationInProgress) {\n      const rect = this.root.getBoundingClientRect();\n      const endX = this.clamp(\n        (event.clientX - rect.left) / this.props.widthInPx\n      );\n      const endY = this.clamp(\n        (event.clientY - rect.top) / this.props.heightInPx\n      );\n      if (this.createdId === null) {\n        this.createdId = this.getNextId();\n        const startX = this.clamp(\n          (this.mouseXAtPress - rect.left) / this.props.widthInPx\n        );\n        const startY = this.clamp(\n          (this.mouseYAtPress - rect.top) / this.props.heightInPx\n        );\n        const line = {\n          id: this.createdId,\n          type: \"line\",\n          startX,\n          startY,\n          endX,\n          endY\n        };\n        this.root.classList.add(\"line-end-dragged\");\n        this.props.onChange([...this.props.measurements, line]);\n      } else {\n        const line = this.props.measurements.filter(\n          a => a.id === this.createdId\n        )[0];\n        this.onChange({ ...line, endX, endY });\n      }\n    } else if (this.circleCreationInProgress) {\n      const rect = this.root.getBoundingClientRect();\n      const cursorX = event.clientX - rect.left;\n      const cursorY = event.clientY - rect.top;\n      if (this.createdId === null) {\n        this.createdId = this.getNextId();\n        const centerX = this.clamp(\n          (this.mouseXAtPress - rect.left) / this.props.widthInPx\n        );\n        const centerY = this.clamp(\n          (this.mouseYAtPress - rect.top) / this.props.heightInPx\n        );\n        const radius = this.calculateRadius(cursorX, cursorY, centerX, centerY);\n        const circle = {\n          id: this.createdId,\n          type: \"circle\",\n          centerX,\n          centerY,\n          radius\n        };\n        this.root.classList.add(\"circle-stroke-dragged\");\n        this.props.onChange([...this.props.measurements, circle]);\n      } else {\n        const circle = this.props.measurements.filter(\n          a => a.id === this.createdId\n        )[0];\n        const radius = this.calculateRadius(\n          cursorX,\n          cursorY,\n          circle.centerX,\n          circle.centerY\n        );\n        this.onChange({ ...circle, radius });\n      }\n    }\n  };\n\n  calculateRadius = (cursorX, cursorY, centerX, centerY) => {\n    const deltaX = cursorX - centerX * this.props.widthInPx;\n    const deltaY = cursorY - centerY * this.props.heightInPx;\n    const radiusInPx = Math.max(Math.hypot(deltaX, deltaY), minRadiusInPx);\n    let radius =\n      radiusInPx / Math.sqrt(this.props.widthInPx * this.props.widthInPx);\n\n    if (centerX + radius > 1) {\n      radius = 1 - centerX;\n    }\n    if (centerX - radius < 0) {\n      radius = centerX;\n    }\n    if (centerY + radius > 1) {\n      radius = 1 - centerY;\n    }\n    if (centerY - radius < 0) {\n      radius = centerY;\n    }\n    return radius;\n  };\n\n  onMouseUp = event => this.endDrag();\n\n  endDrag = () => {\n    if (this.lineCreationInProgress) {\n      this.lineCreationInProgress = false;\n      if (this.createdId !== null) {\n        this.root.classList.remove(\"line-end-dragged\");\n      }\n    } else if (this.circleCreationInProgress) {\n      this.circleCreationInProgress = false;\n      if (this.createdId !== null) {\n        this.root.classList.remove(\"circle-stroke-dragged\");\n      }\n    }\n    if (this.createdId !== null) {\n      this.props.onCommit(\n        this.props.measurements.filter(a => a.id === this.createdId)[0]\n      );\n      this.createdId = null;\n    }\n  };\n\n  onClick = event => {\n    if (this.doubleClicked.length > 0) {\n      return;\n    }\n    if (this.props.mode === \"text\") {\n      const id = this.getNextId();\n      const rect = this.root.getBoundingClientRect();\n      const arrowX = (event.clientX - rect.left) / this.props.widthInPx;\n      const arrowY = (event.clientY - rect.top) / this.props.heightInPx;\n      const xOffsetDirection = arrowX < 0.8 ? 1 : -1;\n      const yOffsetDirection = arrowY < 0.8 ? 1 : -1;\n      const textX = arrowX + xOffsetDirection * 0.05;\n      const textY = arrowY + yOffsetDirection * 0.07;\n      const text = {\n        id,\n        type: \"text\",\n        arrowX,\n        arrowY,\n        textX,\n        textY,\n        editorState: null,\n        editable: true\n      };\n      this.props.onChange([...this.props.measurements, text]);\n      this.props.onCommit(text);\n    }\n  };\n\n  getNextId = () =>\n    this.props.measurements.length > 0\n      ? Math.max(...this.props.measurements.map(a => a.id)) + 1\n      : 0;\n\n  onChange = m => {\n    if (this.doubleClicked.length > 0) {\n      return;\n    }\n    this.props.onChange(\n      this.props.measurements.map(n => (m.id === n.id ? m : n))\n    );\n  }\n\n  delete = m => {\n    this.props.onChange(this.props.measurements.filter(n => n.id !== m.id));\n    this.props.onCommit(m);\n  };\n\n  clamp = value => Math.min(1, Math.max(0, value));\n\n  finishAnyTextEdit = () => {\n    const editable = this.props.measurements.filter(\n      m => m.type === \"text\" && m.editable\n    )[0];\n    if (editable) {\n      this.props.onChange(\n        this.props.measurements.map(m =>\n          m === editable ? this.finishEdit(m) : m\n        )\n      );\n    }\n  };\n\n  finishEdit = text => ({\n    ...text,\n    editorState: EditorState.moveFocusToEnd(\n      EditorState.moveSelectionToEnd(text.editorState)\n    ),\n    editable: false\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/core/MeasurementLayerBase.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 3\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/lib/addStyles.js\n// module id = 4\n// module chunks = 0","module.exports = require(\"draft-js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"draft-js\"\n// module id = 5\n// module chunks = 0","import React, { PureComponent } from \"react\";\nimport MeasurementLayerBase from \"./core/MeasurementLayerBase\";\nimport MeasurementButtons from \"./buttons/MeasurementButtons\";\nimport \"./MeasurementLayer.css\";\n\nexport default class MeasurementLayer extends PureComponent {\n  state = { mode: null };\n\n  render() {\n    const hasSize = this.props.widthInPx > 0 && this.props.heightInPx > 0;\n    return (\n      hasSize && (\n        <div className=\"measurement-layer\" ref={e => (this.root = e)}>\n          <MeasurementLayerBase\n            disabled={this.state.disabled}\n            measurements={this.props.measurements}\n            onChange={this.props.onChange}\n            widthInPx={this.props.widthInPx}\n            heightInPx={this.props.heightInPx}\n            measureLine={this.props.measureLine}\n            measureCircle={this.props.measureCircle}\n            mode={this.state.mode}\n            onCommit={this.onCommit}\n            onMidMouse={this.props.onMidMouse}\n          />\n        </div>\n      )\n    );\n  }\n\n  add = () => {\n    this.setState({ mode: \"line\" });\n  }\n\n  disable = () => {\n    this.setState({ mode: null, disabled: true });\n  }\n\n  enable = () => {\n    this.setState({ mode: null, disabled: false });\n  }\n\n  start = (event) => {\n    this.setState({ event });\n  }\n\n  onCommit = measurement => {\n    this.setState({ mode: null });\n    if (this.props.onCommit) {\n      this.props.onCommit(measurement);\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/MeasurementLayer.js","export const calculateDistance = (line, physicalWidth, physicalHeight) => {\n  const deltaX = (line.endX - line.startX) * physicalWidth;\n  const deltaY = (line.endY - line.startY) * physicalHeight;\n  return Math.hypot(deltaX, deltaY);\n};\n\nexport const calculateArea = (circle, physicalWidth, physicalHeight) => {\n  return (\n    Math.PI * circle.radius * circle.radius * physicalWidth * physicalHeight\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/utils/MeasurementUtils.js","import React from \"react\";\n\nexport const RulerIcon = () => {\n  const path =\n    \"M 1 2 L 1 12 L 1 13 L 14 13 L 14 12 L 14 2 L 1 2 z M 2 3 L 3 3 L 3 5 L 2 5 L 2 3 z M 4 3 L 5 3 L 5 8 L 4 8 L 4 3 z M 6 3 \" +\n    \"L 7 3 L 7 5 L 6 5 L 6 3 z M 8 3 L 9 3 L 9 5 L 8 5 L 8 3 z M 10 3 L 11 3 L 11 8 L 10 8 L 10 3 z M 12 3 L 13 3 L 13 5 L 12 5 L 12 3 z \";\n  return (\n    <svg width=\"15\" height=\"15\">\n      <path d={path} className=\"ruler-icon\" />\n    </svg>\n  );\n};\n\nexport const CircleIcon = () => (\n  <svg width=\"15\" height=\"15\">\n    <circle className=\"circle-icon\" cx=\"7.5\" cy=\"7.5\" r=\"5.5\" />\n  </svg>\n);\n\nexport const TextIcon = () => {\n  const path =\n    \"M 5.6367188 1 L 1 14 L 4.2617188 14 L 5.1308594 11.371094 L 9.7851562 11.371094 L 10.652344 14 L 14 14 \" +\n    \"L 9.3632812 1 L 5.6367188 1 z M 7.4570312 4.3261719 L 9 8.9882812 L 5.9160156 8.9882812 L 7.4570312 4.3261719 z \";\n  return (\n    <svg width=\"15\" height=\"15\">\n      <path d={path} className=\"text-icon\" />\n    </svg>\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/buttons/Icons.js","import React, { PureComponent } from \"react\";\nimport { RulerIcon, CircleIcon, TextIcon } from \"./Icons\";\n\nexport default class MeasurementButtons extends PureComponent {\n  componentDidMount() {\n    this.root.addEventListener(\"mousedown\", this.onRootMouseDown);\n  }\n\n  componentWillUnmount() {\n    this.root.addEventListener(\"mousedown\", this.onRootMouseDown);\n  }\n\n  render() {\n    const rootClass = \"button-bar\" + (this.props.mode ? \" pressed\" : \"\");\n    const lineClass =\n      \"line-button\" + (this.props.mode === \"line\" ? \" pressed\" : \"\");\n    const circleClass =\n      \"circle-button\" + (this.props.mode === \"circle\" ? \" pressed\" : \"\");\n    const textClass =\n      \"text-button\" + (this.props.mode === \"text\" ? \" pressed\" : \"\");\n\n    return (\n      <div className={rootClass} ref={e => (this.root = e)}>\n        <button\n          type=\"button\"\n          className={lineClass}\n          onClick={event => this.props.onClick(\"line\")}\n        >\n          <RulerIcon />\n        </button>\n        <button\n          type=\"button\"\n          className={circleClass}\n          onClick={event => this.props.onClick(\"circle\")}\n        >\n          <CircleIcon />\n        </button>\n        <button\n          type=\"button\"\n          className={textClass}\n          onClick={event => this.props.onClick(\"text\")}\n        >\n          <TextIcon />\n        </button>\n      </div>\n    );\n  }\n\n  onRootMouseDown = event => {\n    event.stopPropagation();\n    event.preventDefault();\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/buttons/MeasurementButtons.js","import React, { PureComponent } from \"react\";\nimport TextAnchor from \"./TextAnchor\";\n\nexport const minRadiusInPx = 3;\nconst textOffset = 16;\n\nexport default class CircleMeasurement extends PureComponent {\n  componentDidMount() {\n    this.fill.addEventListener(\"mousedown\", this.onFillMouseDown);\n    this.stroke.addEventListener(\"mousedown\", this.onStrokeMouseDown);\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    window.addEventListener(\"mouseup\", this.onMouseUp);\n    window.addEventListener(\"blur\", this.endDrag);\n  }\n\n  componentWillUnmount() {\n    this.fill.removeEventListener(\"mousedown\", this.onFillMouseDown);\n    this.stroke.removeEventListener(\"mousedown\", this.onStrokeMouseDown);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.removeEventListener(\"touchmove\", this.onTouchMove);\n    window.removeEventListener(\"mouseup\", this.onMouseUp);\n    window.removeEventListener(\"blur\", this.endDrag);\n  }\n\n  render() {\n    const centerX = this.props.circle.centerX * this.props.parentWidth;\n    const centerY = this.props.circle.centerY * this.props.parentHeight;\n    const radius =\n      this.props.circle.radius *\n      Math.sqrt(this.props.parentWidth * this.props.parentHeight);\n    const textY = centerY + radius + textOffset;\n    const text = this.props.measureCircle(this.props.circle);\n\n    return (\n      <div className=\"circle-measurement\" ref={e => (this.root = e)}>\n        <TextAnchor\n          x={centerX}\n          y={textY}\n          onDeleteButtonClick={this.onDeleteButtonClick}\n        >\n          <div className=\"measurement-text\" ref={e => (this.text = e)}>\n            {text}\n          </div>\n        </TextAnchor>\n        <svg className=\"measurement-svg\">\n          <g className=\"grabber-group\">\n            <circle\n              className=\"fill-grabber\"\n              cx={centerX}\n              cy={centerY}\n              r={radius}\n              ref={e => (this.fill = e)}\n            />\n            <circle\n              className=\"stroke-grabber\"\n              cx={centerX}\n              cy={centerY}\n              r={radius}\n              ref={e => (this.stroke = e)}\n            />\n            <circle\n              className=\"circle\"\n              cx={centerX}\n              cy={centerY}\n              r={radius}\n              ref={e => (this.circle = e)}\n            />\n          </g>\n        </svg>\n      </div>\n    );\n  }\n\n  onStrokeMouseDown = event => {\n    if (event.button === 0) {\n      this.strokeDragInProgress = true;\n      event.preventDefault();\n      this.onDragBegin(event.clientX, event.clientY);\n    }\n  };\n\n  onFillMouseDown = event => {\n    if (event.button === 0) {\n      this.fillDragInProgress = true;\n      event.preventDefault();\n      this.onDragBegin(event.clientX, event.clientY);\n    }\n  };\n\n  onDragBegin = (eventX, eventY) => {\n    this.mouseXAtPress = eventX;\n    this.mouseYAtPress = eventY;\n    this.circleAtPress = this.props.circle;\n    this.centerXAtPress = this.props.circle.centerX * this.props.parentWidth;\n    this.centerYAtPress = this.props.circle.centerY * this.props.parentHeight;\n\n    const rect = this.root.getBoundingClientRect();\n    const centerClientX = this.centerXAtPress + rect.left;\n    const centerClientY = this.centerYAtPress + rect.top;\n    const radiusAtPress =\n      this.props.circle.radius *\n      Math.sqrt(this.props.parentWidth * this.props.parentHeight);\n    const theta = Math.atan2(\n      this.mouseYAtPress - centerClientY,\n      this.mouseXAtPress - centerClientX\n    );\n    this.pointXAtPress = radiusAtPress * Math.cos(theta);\n    this.pointYAtPress = radiusAtPress * Math.sin(theta);\n  };\n\n  onMouseMove = event => this.onDrag(event.clientX, event.clientY);\n\n  onDrag = (eventX, eventY) => {\n    if (\n      (this.fillDragInProgress || this.strokeDragInProgress) &&\n      !this.dragOccurred\n    ) {\n      this.dragOccurred = true;\n      this.toggleDragStyles();\n    }\n\n    if (this.strokeDragInProgress) {\n      const newPointX = this.pointXAtPress + eventX - this.mouseXAtPress;\n      const newPointY = this.pointYAtPress + eventY - this.mouseYAtPress;\n      const radiusInPixels = Math.max(\n        Math.hypot(newPointX, newPointY),\n        minRadiusInPx\n      );\n      let radius =\n        radiusInPixels /\n        Math.sqrt(this.props.parentWidth * this.props.parentHeight);\n\n      if (this.props.circle.centerX + radius > 1) {\n        radius = 1 - this.props.circle.centerX;\n      }\n      if (this.props.circle.centerX - radius < 0) {\n        radius = this.props.circle.centerX;\n      }\n      if (this.props.circle.centerY + radius > 1) {\n        radius = 1 - this.props.circle.centerY;\n      }\n      if (this.props.circle.centerY - radius < 0) {\n        radius = this.props.circle.centerY;\n      }\n      this.props.onChange({ ...this.props.circle, radius });\n    } else if (this.fillDragInProgress) {\n      let centerX =\n        (this.centerXAtPress + eventX - this.mouseXAtPress) /\n        this.props.parentWidth;\n      let centerY =\n        (this.centerYAtPress + eventY - this.mouseYAtPress) /\n        this.props.parentHeight;\n\n      if (centerX + this.props.circle.radius > 1) {\n        centerX = 1 - this.props.circle.radius;\n      } else if (centerX - this.props.circle.radius < 0) {\n        centerX = this.props.circle.radius;\n      }\n      if (centerY + this.props.circle.radius > 1) {\n        centerY = 1 - this.props.circle.radius;\n      } else if (centerY - this.props.circle.radius < 0) {\n        centerY = this.props.circle.radius;\n      }\n      this.props.onChange({ ...this.props.circle, centerX, centerY });\n    }\n  };\n\n  onMouseUp = event => this.endDrag();\n\n  endDrag = () => {\n    if (this.dragOccurred) {\n      this.toggleDragStyles();\n      this.dragOccurred = false;\n    }\n    const anyDragAttempted =\n      this.strokeDragInProgress || this.fillDragInProgress;\n    if (this.strokeDragInProgress) {\n      this.strokeDragInProgress = false;\n    }\n    if (this.fillDragInProgress) {\n      this.fillDragInProgress = false;\n    }\n    if (anyDragAttempted && this.didValuesChange()) {\n      this.props.onCommit(this.props.circle);\n    }\n  };\n\n  didValuesChange = () =>\n    this.props.circle.centerX !== this.circleAtPress.centerX ||\n    this.props.circle.centerY !== this.circleAtPress.centerY ||\n    this.props.circle.radius !== this.circleAtPress.radius;\n\n  getAnnotationLayerClassList = () => this.root.parentElement.classList;\n\n  toggleDragStyles = () => {\n    if (this.strokeDragInProgress) {\n      this.circle.classList.toggle(\"dragged\");\n      this.stroke.classList.toggle(\"dragged\");\n      this.getAnnotationLayerClassList().toggle(\"circle-stroke-dragged\");\n    }\n    if (this.fillDragInProgress) {\n      this.circle.classList.toggle(\"dragged\");\n      this.fill.classList.toggle(\"dragged\");\n      this.getAnnotationLayerClassList().toggle(\"circle-fill-dragged\");\n    }\n    this.getAnnotationLayerClassList().toggle(\"any-dragged\");\n  };\n\n  onDeleteButtonClick = () => this.props.onDeleteButtonClick(this.props.circle);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/core/CircleMeasurement.js","import React, { PureComponent } from \"react\";\nimport TextAnchor from \"./TextAnchor\";\n\nconst edgeLength = 15;\nconst textOffset = 16;\nconst quarterCircle = Math.PI / 2;\n\nexport default class LineMeasurement extends PureComponent {\n\tstate = { midHover: false, doubleClick: false };\n\n\tcomponentDidMount() {\n\t\tthis.startGrabber.addEventListener(\"mousedown\", this.onStartMouseDown);\n\t\tthis.startGrabber.addEventListener(\"mouseenter\", this.onMidMouseEnter);\n\t\tthis.startGrabber.addEventListener(\"mouseleave\", this.onMidMouseLeave);\n\t\tthis.midGrabber.addEventListener(\"mousedown\", this.onMidMouseDown);\n\t\tthis.midGrabber.addEventListener(\"mouseenter\", this.onMidMouseEnter);\n\t\tthis.midGrabber.addEventListener(\"mouseleave\", this.onMidMouseLeave);\n\t\tthis.midGrabber.addEventListener(\"dblclick\", this.onDoubleClick);\n\t\tthis.endGrabber.addEventListener(\"mousedown\", this.onEndMouseDown);\n\t\tthis.endGrabber.addEventListener(\"mouseenter\", this.onMidMouseEnter);\n\t\tthis.endGrabber.addEventListener(\"mouseleave\", this.onMidMouseLeave);\n\t\tdocument.addEventListener(\"mousemove\", this.onMouseMove);\n\t\twindow.addEventListener(\"mouseup\", this.onMouseUp);\n\t\twindow.addEventListener(\"blur\", this.endDrag);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.startGrabber.removeEventListener(\"mousedown\", this.onStartMouseDown);\n\t\tthis.startGrabber.removeEventListener(\"mouseenter\", this.onMidMouseEnter);\n\t\tthis.startGrabber.removeEventListener(\"mouseleave\", this.onMidMouseLeave);\n\t\tthis.midGrabber.removeEventListener(\"mousedown\", this.onMidMouseDown);\n\t\tthis.midGrabber.removeEventListener(\"mouseenter\", this.onMidMouseEnter);\n\t\tthis.midGrabber.removeEventListener(\"mouseleave\", this.onMidMouseLeave);\n\t\tthis.midGrabber.removeEventListener(\"dblclick\", this.onDoubleClick);\n\t\tthis.endGrabber.removeEventListener(\"mousedown\", this.onEndMouseDown);\n\t\tthis.endGrabber.removeEventListener(\"mouseenter\", this.onMidMouseEnter);\n\t\tthis.endGrabber.removeEventListener(\"mouseleave\", this.onMidMouseLeave);\n\t\tdocument.removeEventListener(\"mousemove\", this.onMouseMove);\n\t\twindow.removeEventListener(\"mouseup\", this.onMouseUp);\n\t\twindow.removeEventListener(\"blur\", this.endDrag);\n\t}\n\n\trender() {\n\t\t// Line layout:\n\t\tconst startX = this.props.line.startX * this.props.parentWidth;\n\t\tconst startY = this.props.line.startY * this.props.parentHeight;\n\t\tconst endX = this.props.line.endX * this.props.parentWidth;\n\t\tconst endY = this.props.line.endY * this.props.parentHeight;\n\t\tconst deltaX = endX - startX;\n\t\tconst deltaY = endY - startY;\n\t\tconst rotate = Math.atan2(deltaY, deltaX);\n\t\tconst edgeX = (edgeLength * Math.sin(rotate)) / 3.0;\n\t\tconst edgeY = (edgeLength * Math.cos(rotate)) / 3.0;\n\n\t\tif (this.state.doubleClick && this.props.doubleClicked.length == 0) {\n\t\t\tthis.state.doubleClick = false;\n\t\t}\n\n\t\t// Text layout (make sure the text is never rotated so much to be upside down):\n\t\tconst centerX = (startX + endX) / 2;\n\t\tconst centerY = (startY + endY) / 2;\n\t\tconst rotateIsSmall = Math.abs(rotate) <= quarterCircle;\n\t\tconst offsetX = (rotateIsSmall ? -1 : 1) * textOffset * Math.sin(rotate);\n\t\tconst offsetY = (rotateIsSmall ? 1 : -1) * textOffset * Math.cos(rotate);\n\t\tconst textX = centerX + offsetX;\n\t\tconst textY = centerY + offsetY;\n\t\tconst textRotate = Math.atan2(offsetY, offsetX) - quarterCircle;\n\n\t\tconst text = this.props.measureLine(this.props.line);\n\t\tconst rootClassName =\n\t\t\t\"line-measurement\" + (this.state.midHover ? \" mid-hover\" : \"\");\n\t\tconst lineClassName = this.state.doubleClick ? \" double-click\" : \" line\";\n\t\tconst handlerClassName = this.state.doubleClick ? \" double-click\" : \"\";\n\t\tconst grabberClassName = this.state.doubleClick\n\t\t\t? \" double-click\"\n\t\t\t: \" mid-grabber\";\n\t\tconst colorStyle = {\n\t\t\tfill:\n\t\t\t\tNumber(text) > 3 ? \"#F93D3D\" : Number(text) > 2 ? \"#FF7B43\" : \"#FFF500\",\n\t\t\tstroke:\n\t\t\t\tNumber(text) > 3 ? \"#F93D3D\" : Number(text) > 2 ? \"#FF7B43\" : \"#FFF500\",\n\t\t};\n\n\t\treturn (\n\t\t\t<div className={rootClassName} ref={(e) => (this.root = e)}>\n\t\t\t\t<svg className=\"measurement-svg\">\n\t\t\t\t\t<g className=\"grabber-group\">\n\t\t\t\t\t\t<line\n\t\t\t\t\t\t\tclassName={\"grabber\" + grabberClassName}\n\t\t\t\t\t\t\tx1={startX}\n\t\t\t\t\t\t\ty1={startY}\n\t\t\t\t\t\t\tx2={endX}\n\t\t\t\t\t\t\ty2={endY}\n\t\t\t\t\t\t\tref={(e) => (this.midGrabber = e)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<line\n\t\t\t\t\t\t\tclassName={\"mid-line\" + lineClassName}\n\t\t\t\t\t\t\tstyle={colorStyle}\n\t\t\t\t\t\t\tx1={startX}\n\t\t\t\t\t\t\ty1={startY}\n\t\t\t\t\t\t\tx2={endX}\n\t\t\t\t\t\t\ty2={endY}\n\t\t\t\t\t\t\tref={(e) => (this.midLine = e)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g className=\"grabber-group\">\n\t\t\t\t\t\t<line\n\t\t\t\t\t\t\tclassName=\"grabber start-grabber\"\n\t\t\t\t\t\t\tx1={startX - edgeX}\n\t\t\t\t\t\t\ty1={startY + edgeY}\n\t\t\t\t\t\t\tx2={startX + edgeX}\n\t\t\t\t\t\t\ty2={startY - edgeY}\n\t\t\t\t\t\t\tref={(e) => (this.startGrabber = e)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tclassName={\"line start-line\" + handlerClassName}\n\t\t\t\t\t\t\tstyle={colorStyle}\n\t\t\t\t\t\t\tcx={startX}\n\t\t\t\t\t\t\tcy={startY}\n\t\t\t\t\t\t\tr={4}\n\t\t\t\t\t\t\tref={(e) => (this.startLine = e)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g className=\"grabber-group\">\n\t\t\t\t\t\t<line\n\t\t\t\t\t\t\tclassName=\"grabber end-grabber\"\n\t\t\t\t\t\t\tx1={endX - edgeX}\n\t\t\t\t\t\t\ty1={endY + edgeY}\n\t\t\t\t\t\t\tx2={endX + edgeX}\n\t\t\t\t\t\t\ty2={endY - edgeY}\n\t\t\t\t\t\t\tref={(e) => (this.endGrabber = e)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tclassName={\"line end-line\" + handlerClassName}\n\t\t\t\t\t\t\tstyle={colorStyle}\n\t\t\t\t\t\t\tcx={endX}\n\t\t\t\t\t\t\tcy={endY}\n\t\t\t\t\t\t\tr={4}\n\t\t\t\t\t\t\tref={(e) => (this.endLine = e)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t\t<TextAnchor\n\t\t\t\t\tx={(startX + endX) / 2}\n\t\t\t\t\ty={(startY + endY) / 2}\n\t\t\t\t\tlengthX={edgeX}\n\t\t\t\t\tlengthY={edgeY}\n\t\t\t\t\trotate={textRotate}\n\t\t\t\t\tonDeleteButtonClick={this.onDeleteButtonClick}\n\t\t\t\t\tvisible={this.state.midHover}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\"measurement-text\" + handlerClassName}\n\t\t\t\t\t\tref={(e) => (this.text = e)}\n\t\t\t\t\t\t// style={transofmr}\n\t\t\t\t\t>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</div>\n\t\t\t\t</TextAnchor>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tonStartMouseDown = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.button === 0) {\n\t\t\tthis.startDragInProgress = true;\n\t\t\tevent.preventDefault();\n\t\t\tthis.onDragBegin(event.clientX, event.clientY);\n\t\t}\n\t};\n\n\tonMidMouseDown = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.button === 0) {\n\t\t\tthis.midDragInProgress = true;\n\t\t\tevent.preventDefault();\n\t\t\tthis.onDragBegin(event.clientX, event.clientY);\n\t\t}\n\t};\n\n\tonEndMouseDown = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.button === 0) {\n\t\t\tthis.endDragInProgress = true;\n\t\t\tevent.preventDefault();\n\t\t\tthis.onDragBegin(event.clientX, event.clientY);\n\t\t}\n\t};\n\n\tonDragBegin = (eventX, eventY) => {\n\t\tthis.mouseXAtPress = eventX;\n\t\tthis.mouseYAtPress = eventY;\n\t\tthis.lineAtPress = this.props.line;\n\t\tthis.startXAtPress = this.props.line.startX * this.props.parentWidth;\n\t\tthis.startYAtPress = this.props.line.startY * this.props.parentHeight;\n\t\tthis.endXAtPress = this.props.line.endX * this.props.parentWidth;\n\t\tthis.endYAtPress = this.props.line.endY * this.props.parentHeight;\n\t};\n\n\tonMouseMove = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tthis.onDrag(event.clientX, event.clientY);\n\t};\n\n\tonDrag = (eventX, eventY) => {\n\t\tif (\n\t\t\t(this.startDragInProgress ||\n\t\t\t\tthis.endDragInProgress ||\n\t\t\t\tthis.midDragInProgress) &&\n\t\t\t!this.dragOccurred\n\t\t) {\n\t\t\tthis.dragOccurred = true;\n\t\t\tthis.toggleDragStyles();\n\t\t}\n\n\t\tif (this.startDragInProgress) {\n\t\t\tconst startX = this.clamp(this.getXAfterDrag(this.startXAtPress, eventX));\n\t\t\tconst startY = this.clamp(this.getYAfterDrag(this.startYAtPress, eventY));\n\t\t\tthis.props.onChange({ ...this.props.line, startX, startY });\n\t\t} else if (this.endDragInProgress) {\n\t\t\tconst endX = this.clamp(this.getXAfterDrag(this.endXAtPress, eventX));\n\t\t\tconst endY = this.clamp(this.getYAfterDrag(this.endYAtPress, eventY));\n\t\t\tthis.props.onChange({ ...this.props.line, endX, endY });\n\t\t} else if (this.midDragInProgress) {\n\t\t\tlet startX = this.getXAfterDrag(this.startXAtPress, eventX);\n\t\t\tlet startY = this.getYAfterDrag(this.startYAtPress, eventY);\n\t\t\tlet endX = this.getXAfterDrag(this.endXAtPress, eventX);\n\t\t\tlet endY = this.getYAfterDrag(this.endYAtPress, eventY);\n\t\t\tconst deltaX = endX - startX;\n\t\t\tconst deltaY = endY - startY;\n\n\t\t\t// Don't let the line be dragged outside the layer bounds:\n\t\t\tif (startX < 0) {\n\t\t\t\tstartX = 0;\n\t\t\t\tendX = deltaX;\n\t\t\t} else if (startX > 1) {\n\t\t\t\tstartX = 1;\n\t\t\t\tendX = 1 + deltaX;\n\t\t\t}\n\t\t\tif (startY < 0) {\n\t\t\t\tstartY = 0;\n\t\t\t\tendY = deltaY;\n\t\t\t} else if (startY > 1) {\n\t\t\t\tstartY = 1;\n\t\t\t\tendY = 1 + deltaY;\n\t\t\t}\n\t\t\tif (endX < 0) {\n\t\t\t\tstartX = -deltaX;\n\t\t\t\tendX = 0;\n\t\t\t} else if (endX > 1) {\n\t\t\t\tstartX = 1 - deltaX;\n\t\t\t\tendX = 1;\n\t\t\t}\n\t\t\tif (endY < 0) {\n\t\t\t\tstartY = -deltaY;\n\t\t\t\tendY = 0;\n\t\t\t} else if (endY > 1) {\n\t\t\t\tstartY = 1 - deltaY;\n\t\t\t\tendY = 1;\n\t\t\t}\n\t\t\tthis.props.onChange({ ...this.props.line, startX, startY, endX, endY });\n\t\t}\n\t};\n\n\tonDoubleClick = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\tthis.setState({ ...this.state, doubleClick: false, midHover: false });\n\t\t\tthis.props.onDoubleClick(false, this.props.line);\n\t\t} else {\n\t\t\tthis.setState({ ...this.state, doubleClick: true, midHover: false });\n\t\t\tthis.getAnnotationLayerClassList().toggle(\"double-click\");\n\t\t\tthis.props.onDoubleClick(true, this.props.line);\n\t\t}\n\t};\n\n\tgetXAfterDrag = (xAtPress, clientX) =>\n\t\t(xAtPress + clientX - this.mouseXAtPress) / this.props.parentWidth;\n\n\tgetYAfterDrag = (yAtPress, clientY) =>\n\t\t(yAtPress + clientY - this.mouseYAtPress) / this.props.parentHeight;\n\n\tonMouseUp = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tthis.endDrag();\n\t};\n\n\tendDrag = () => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.dragOccurred) {\n\t\t\tthis.toggleDragStyles();\n\t\t\tthis.dragOccurred = false;\n\t\t}\n\t\tconst anyDragAttempted =\n\t\t\tthis.startDragInProgress ||\n\t\t\tthis.midDragInProgress ||\n\t\t\tthis.endDragInProgress;\n\t\tif (this.startDragInProgress) {\n\t\t\tthis.startDragInProgress = false;\n\t\t}\n\t\tif (this.midDragInProgress) {\n\t\t\tthis.midDragInProgress = false;\n\t\t}\n\t\tif (this.endDragInProgress) {\n\t\t\tthis.endDragInProgress = false;\n\t\t}\n\t\tif (anyDragAttempted && this.didValuesChange()) {\n\t\t\tthis.props.onCommit(this.props.line);\n\t\t}\n\t};\n\n\tdidValuesChange = () =>\n\t\tthis.props.line.startX !== this.lineAtPress.startX ||\n\t\tthis.props.line.startY !== this.lineAtPress.startY ||\n\t\tthis.props.line.endX !== this.lineAtPress.endX ||\n\t\tthis.props.line.endY !== this.lineAtPress.endY;\n\n\tonMidMouseEnter = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onMidMouse(\"enter\");\n\t\tthis.setState({ ...this.state, midHover: true });\n\t};\n\n\tonMidMouseLeave = (event) => {\n\t\tif (this.state.doubleClick) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onMidMouse(\"leave\");\n\t\tthis.setState({ ...this.state, midHover: false });\n\t};\n\n\tgetAnnotationLayerClassList = () => this.root.parentElement.classList;\n\n\tclamp = (value) => Math.min(1, Math.max(0, value));\n\n\ttoggleDragStyles = () => {\n\t\tif (this.startDragInProgress) {\n\t\t\tthis.startLine.classList.toggle(\"dragged\");\n\t\t\tthis.startGrabber.classList.toggle(\"dragged\");\n\t\t\tthis.getAnnotationLayerClassList().toggle(\"line-start-dragged\");\n\t\t}\n\t\tif (this.midDragInProgress) {\n\t\t\tthis.startLine.classList.toggle(\"dragged\");\n\t\t\tthis.midLine.classList.toggle(\"dragged\");\n\t\t\tthis.endLine.classList.toggle(\"dragged\");\n\t\t\tthis.startGrabber.classList.toggle(\"dragged\");\n\t\t\tthis.midGrabber.classList.toggle(\"dragged\");\n\t\t\tthis.endGrabber.classList.toggle(\"dragged\");\n\t\t\tthis.getAnnotationLayerClassList().toggle(\"line-mid-dragged\");\n\t\t}\n\t\tif (this.endDragInProgress) {\n\t\t\tthis.endLine.classList.toggle(\"dragged\");\n\t\t\tthis.endGrabber.classList.toggle(\"dragged\");\n\t\t\tthis.getAnnotationLayerClassList().toggle(\"line-end-dragged\");\n\t\t}\n\t\tthis.getAnnotationLayerClassList().toggle(\"any-dragged\");\n\t};\n\n\tonDeleteButtonClick = () => this.props.onDeleteButtonClick(this.props.line);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/core/LineMeasurement.js","import React, { PureComponent } from \"react\";\nimport { Editor, EditorState } from \"draft-js\";\nimport TextAnchor from \"./TextAnchor\";\n\nconst headWidth = 8;\nconst headHeight = 5;\nconst headHoverWidth = 10;\nconst headHoverHeight = 6;\nconst headHoverOffset = 1.5;\nconst headGrabberWidth = 15;\nconst headGrabberHeight = 9;\nconst headGrabberOffset = 3;\n\nexport default class TextAnnotation extends PureComponent {\n  propagateTextChanges = false;\n  state = {\n    lineHover: false,\n    headHover: false,\n    lineDragged: false,\n    headDragged: false,\n    textDragged: false\n  };\n\n  componentDidMount() {\n    this.text.addEventListener(\"mousedown\", this.onTextMouseDown);\n    this.lineGrabber.addEventListener(\"mousedown\", this.onLineMouseDown);\n    this.lineGrabber.addEventListener(\"mouseenter\", this.onLineMouseEnter);\n    this.lineGrabber.addEventListener(\"mouseleave\", this.onLineMouseLeave);\n    this.headGrabber.addEventListener(\"mousedown\", this.onHeadMouseDown);\n    this.headGrabber.addEventListener(\"mouseenter\", this.onHeadMouseEnter);\n    this.headGrabber.addEventListener(\"mouseleave\", this.onHeadMouseLeave);\n    this.root.addEventListener(\"dblclick\", this.onDoubleClick);\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"keydown\", this.onDocumentKeyDown, true);\n    window.addEventListener(\"mouseup\", this.onMouseUp);\n    window.addEventListener(\"blur\", this.endDrag);\n    this.updateMask();\n\n    if (this.props.text.editable) {\n      this.propagateTextChanges = true;\n      this.editor.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.text.removeEventListener(\"mousedown\", this.onTextMouseDown);\n    this.lineGrabber.removeEventListener(\"mousedown\", this.onLineMouseDown);\n    this.lineGrabber.removeEventListener(\"mouseenter\", this.onLineMouseEnter);\n    this.lineGrabber.removeEventListener(\"mouseleave\", this.onLineMouseLeave);\n    this.headGrabber.removeEventListener(\"mousedown\", this.onHeadMouseDown);\n    this.headGrabber.removeEventListener(\"mouseenter\", this.onHeadMouseEnter);\n    this.headGrabber.removeEventListener(\"mouseleave\", this.onHeadMouseLeave);\n    this.root.removeEventListener(\"dblclick\", this.onDoubleClick);\n    this.root.removeEventListener(\"touchstart\", this.onRootTouchStart);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    document.removeEventListener(\"keydown\", this.onDocumentKeyDown, true);\n    window.removeEventListener(\"mouseup\", this.onMouseUp);\n    window.removeEventListener(\"blur\", this.endDrag);\n  }\n\n  componentDidUpdate() {\n    this.updateMask();\n    if (!this.props.text.editable) {\n      this.propagateTextChanges = false;\n    }\n  }\n\n  render() {\n    const pointX = this.props.text.arrowX * this.props.parentWidth;\n    const pointY = this.props.text.arrowY * this.props.parentHeight;\n    const textX = this.props.text.textX * this.props.parentWidth;\n    const textY = this.props.text.textY * this.props.parentHeight;\n    const rotate = Math.atan2(pointX - textX, textY - pointY) - Math.PI / 2;\n    const cos = Math.cos(rotate);\n    const sin = Math.sin(rotate);\n\n    const lineEndX = pointX - (headWidth - 1) * cos;\n    const lineEndY = pointY - (headWidth - 1) * sin;\n    const lineClass =\n      \"arrow-line\" +\n      (this.state.lineHover ? \" hover\" : \"\") +\n      (this.state.lineDragged ? \" dragged\" : \"\");\n    // Extra 'M -1 -1' is a workaround for a chrome bug where the line dissapears if straight, even if outside the mask's clip area:\n    const linePath = `M -1 -1 M ${textX} ${textY} L ${lineEndX} ${lineEndY}`;\n\n    const showLargerHead =\n      this.state.lineHover ||\n      this.state.headHover ||\n      this.state.lineDragged ||\n      this.state.headDragged;\n    const headGrabber = this.drawHead(\n      pointX,\n      pointY,\n      headGrabberWidth,\n      headGrabberHeight,\n      rotate,\n      headGrabberOffset,\n      cos,\n      sin\n    );\n    const head = showLargerHead\n      ? this.drawHead(\n          pointX,\n          pointY,\n          headHoverWidth,\n          headHoverHeight,\n          rotate,\n          headHoverOffset,\n          cos,\n          sin\n        )\n      : this.drawHead(pointX, pointY, headWidth, headHeight, rotate, 0, 0, 0);\n\n    const editorState = this.props.text.editorState;\n    const hasText =\n      editorState != null &&\n      editorState.getCurrentContent() != null &&\n      editorState.getCurrentContent().hasText();\n    const textVisible = hasText || this.props.text.editable;\n    const rootClass =\n      \"text-annotation\" +\n      (!hasText ? \" no-text\" : \"\") +\n      (this.props.text.editable ? \" editable\" : \"\");\n\n    const lineMaskId = `lineMask${this.props.text.id}`;\n    const lineMask = textVisible ? \"url(#\" + lineMaskId + \")\" : \"\";\n\n    const lineGrabberClass =\n      \"arrow-line-grabber\" + (this.state.lineDragged ? \" dragged\" : \"\");\n    const headGrabberClass =\n      \"arrow-head-grabber\" + (this.state.headDragged ? \" dragged\" : \"\");\n\n    return (\n      <div className={rootClass} ref={e => (this.root = e)}>\n        <svg className=\"measurement-svg\">\n          <defs>\n            <mask id={lineMaskId}>\n              <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"white\" />\n              <rect fill=\"black\" ref={e => (this.maskRect = e)} />\n            </mask>\n          </defs>\n          <line\n            className={lineGrabberClass}\n            x1={lineEndX}\n            y1={lineEndY}\n            x2={textX}\n            y2={textY}\n            ref={e => (this.lineGrabber = e)}\n          />\n          <path\n            className={headGrabberClass}\n            d={headGrabber.path}\n            transform={headGrabber.transform}\n            ref={e => (this.headGrabber = e)}\n          />\n          <path\n            className=\"arrow-head\"\n            d={head.path}\n            transform={head.transform}\n            ref={e => (this.head = e)}\n          />\n          <path\n            className={lineClass}\n            d={linePath}\n            ref={e => (this.line = e)}\n            mask={lineMask}\n          />\n        </svg>\n        <TextAnchor\n          x={textX}\n          y={textY}\n          onDeleteButtonClick={this.onDeleteButtonClick}\n        >\n          <div className=\"text\" ref={e => (this.text = e)}>\n            <Editor\n              editorState={\n                editorState ? editorState : EditorState.createEmpty()\n              }\n              readOnly={!this.props.text.editable}\n              onChange={this.onTextChange}\n              onBlur={this.finishEdit}\n              ref={e => (this.editor = e)}\n            />\n          </div>\n        </TextAnchor>\n      </div>\n    );\n  }\n\n  drawHead = (pointX, pointY, w, h, rotate, offset, cos, sin) => {\n    const x = pointX + offset * cos;\n    const y = pointY + offset * sin;\n    const path = `M ${x - w} ${y - h} L ${x} ${y} L ${x - w} ${y + h} Z`;\n    const rotateInDegrees = (rotate * 180) / Math.PI;\n    const transform = `rotate(${rotateInDegrees} ${x} ${y})`;\n    return { path, transform };\n  };\n\n  updateMask = () => {\n    const rootBox = this.root.getBoundingClientRect();\n    const textBox = this.text.getBoundingClientRect();\n\n    this.maskRect.setAttribute(\"x\", textBox.left - rootBox.left);\n    this.maskRect.setAttribute(\"y\", textBox.top - rootBox.top);\n    this.maskRect.setAttribute(\"width\", textBox.width);\n    this.maskRect.setAttribute(\"height\", textBox.height);\n  };\n\n  onTextMouseDown = event => {\n    if (this.props.text.editable) {\n      event.stopPropagation();\n    } else if (event.button === 0) {\n      this.textDragInProgress = true;\n      event.preventDefault();\n      this.onDragBegin(event.clientX, event.clientY);\n    }\n  };\n\n  onLineMouseDown = event => {\n    if (event.button === 0) {\n      this.lineDragInProgress = true;\n      event.preventDefault();\n      this.onDragBegin(event.clientX, event.clientY);\n      if (this.props.text.editable) {\n        event.stopPropagation();\n      }\n    }\n  };\n\n  onHeadMouseDown = event => {\n    if (event.button === 0) {\n      this.headDragInProgress = true;\n      event.preventDefault();\n      this.onDragBegin(event.clientX, event.clientY);\n      if (this.props.text.editable) {\n        event.stopPropagation();\n      }\n    }\n  };\n\n  onDragBegin = (eventX, eventY) => {\n    this.mouseXAtPress = eventX;\n    this.mouseYAtPress = eventY;\n    this.textAtPress = this.props.text;\n    this.arrowXAtPress = this.props.text.arrowX * this.props.parentWidth;\n    this.arrowYAtPress = this.props.text.arrowY * this.props.parentHeight;\n    this.textXAtPress = this.props.text.textX * this.props.parentWidth;\n    this.textYAtPress = this.props.text.textY * this.props.parentHeight;\n  };\n\n  onMouseMove = event => this.onDrag(event.clientX, event.clientY);\n\n  onDrag = (eventX, eventY) => {\n    if (\n      (this.textDragInProgress ||\n        this.lineDragInProgress ||\n        this.headDragInProgress) &&\n      this.props.text.editable\n    ) {\n      this.finishEdit();\n    }\n\n    if (\n      (this.textDragInProgress ||\n        this.lineDragInProgress ||\n        this.headDragInProgress) &&\n      !this.dragOccurred\n    ) {\n      this.dragOccurred = true;\n      this.toggleDragStyles();\n    }\n\n    if (this.headDragInProgress) {\n      const arrowX = this.clamp(this.getXAfterDrag(this.arrowXAtPress, eventX));\n      const arrowY = this.clamp(this.getYAfterDrag(this.arrowYAtPress, eventY));\n      this.props.onChange({ ...this.props.text, arrowX, arrowY });\n    } else if (this.textDragInProgress) {\n      const textX = this.clamp(this.getXAfterDrag(this.textXAtPress, eventX));\n      const textY = this.clamp(this.getYAfterDrag(this.textYAtPress, eventY));\n      this.props.onChange({ ...this.props.text, textX, textY });\n    } else if (this.lineDragInProgress) {\n      let arrowX = this.getXAfterDrag(this.arrowXAtPress, eventX);\n      let arrowY = this.getYAfterDrag(this.arrowYAtPress, eventY);\n      let textX = this.getXAfterDrag(this.textXAtPress, eventX);\n      let textY = this.getYAfterDrag(this.textYAtPress, eventY);\n      const deltaX = textX - arrowX;\n      const deltaY = textY - arrowY;\n\n      if (arrowX < 0) {\n        arrowX = 0;\n        textX = deltaX;\n      } else if (arrowX > 1) {\n        arrowX = 1;\n        textX = 1 + deltaX;\n      }\n      if (arrowY < 0) {\n        arrowY = 0;\n        textY = deltaY;\n      } else if (arrowY > 1) {\n        arrowY = 1;\n        textY = 1 + deltaY;\n      }\n      if (textX < 0) {\n        arrowX = -deltaX;\n        textX = 0;\n      } else if (textX > 1) {\n        arrowX = 1 - deltaX;\n        textX = 1;\n      }\n      if (textY < 0) {\n        arrowY = -deltaY;\n        textY = 0;\n      } else if (textY > 1) {\n        arrowY = 1 - deltaY;\n        textY = 1;\n      }\n      this.props.onChange({ ...this.props.text, arrowX, arrowY, textX, textY });\n    }\n  };\n\n  getXAfterDrag = (xAtPress, clientX) =>\n    (xAtPress + clientX - this.mouseXAtPress) / this.props.parentWidth;\n\n  getYAfterDrag = (yAtPress, clientY) =>\n    (yAtPress + clientY - this.mouseYAtPress) / this.props.parentHeight;\n\n  onMouseUp = event => this.endDrag();\n\n  endDrag = () => {\n    if (this.dragOccurred) {\n      this.toggleDragStyles();\n      this.dragOccurred = false;\n    }\n\n    const anyDragAttempted =\n      this.textDragInProgress ||\n      this.lineDragInProgress ||\n      this.headDragInProgress;\n    if (this.textDragInProgress) {\n      this.textDragInProgress = false;\n    }\n    if (this.lineDragInProgress) {\n      this.lineDragInProgress = false;\n    }\n    if (this.headDragInProgress) {\n      this.headDragInProgress = false;\n    }\n    if (anyDragAttempted && this.didValuesChange()) {\n      this.props.onCommit(this.props.text);\n    }\n  };\n\n  didValuesChange = () =>\n    this.props.text.arrowX !== this.textAtPress.arrowX ||\n    this.props.text.arrowY !== this.textAtPress.arrowY ||\n    this.props.text.textX !== this.textAtPress.textX ||\n    this.props.text.textY !== this.textAtPress.textY;\n\n  toggleDragStyles = () => {\n    this.getAnnotationLayerClassList().toggle(\"any-dragged\");\n    if (this.textDragInProgress) {\n      this.getAnnotationLayerClassList().toggle(\"text-dragged\");\n      this.setState({ ...this.state, textDragged: !this.state.textDragged });\n    } else if (this.lineDragInProgress) {\n      this.getAnnotationLayerClassList().toggle(\"arrow-line-dragged\");\n      this.setState({ ...this.state, lineDragged: !this.state.lineDragged });\n    } else if (this.headDragInProgress) {\n      this.getAnnotationLayerClassList().toggle(\"arrow-head-dragged\");\n      this.setState({ ...this.state, headDragged: !this.state.headDragged });\n    }\n  };\n\n  onLineMouseEnter = event => this.setState({ ...this.state, lineHover: true });\n\n  onLineMouseLeave = event =>\n    this.setState({ ...this.state, lineHover: false });\n\n  onHeadMouseEnter = event => this.setState({ ...this.state, headHover: true });\n\n  onHeadMouseLeave = event =>\n    this.setState({ ...this.state, headHover: false });\n\n  getAnnotationLayerClassList = () => this.root.parentElement.classList;\n\n  clamp = value => Math.min(1, Math.max(0, value));\n\n  onDoubleClick = event => {\n    if (event.button === 0) {\n      event.preventDefault();\n      this.startEdit();\n    }\n  };\n\n  onTextChange = editorState => {\n    if (this.propagateTextChanges) {\n      this.props.onChange({ ...this.props.text, editorState });\n    }\n  };\n\n  startEdit = () => {\n    if (!this.props.text.editable) {\n      this.contentStateOnEditStart = this.props.text.editorState.getCurrentContent();\n      this.setEditState(true);\n    }\n  };\n\n  finishEdit = () => {\n    if (this.props.text.editable) {\n      this.setEditState(false);\n      if (\n        this.contentStateOnEditStart !==\n        this.props.text.editorState.getCurrentContent()\n      ) {\n        this.props.onCommit(this.props.text);\n      }\n    }\n  };\n\n  setEditState = editable => {\n    this.propagateTextChanges = editable;\n    // Note: selection change is also important when we finish editing because it clears the selection.\n    const editorState = EditorState.moveFocusToEnd(\n      EditorState.moveSelectionToEnd(this.props.text.editorState)\n    );\n    this.props.onChange({ ...this.props.text, editorState, editable });\n  };\n\n  onDocumentKeyDown = event => {\n    if (\n      this.props.text.editable &&\n      (event.keyCode === 27 || (event.keyCode === 13 && !event.shiftKey))\n    ) {\n      event.stopPropagation();\n      this.finishEdit();\n    }\n  };\n\n  onDeleteButtonClick = () => this.props.onDeleteButtonClick(this.props.text);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/core/TextAnnotation.js","import MeasurementLayer from \"./components/MeasurementLayer\";\nimport MeasurementLayerBase from \"./components/core/MeasurementLayerBase\";\nimport { calculateDistance, calculateArea } from \"./utils/MeasurementUtils\";\n\nmodule.exports = {\n  MeasurementLayer,\n  MeasurementLayerBase,\n  calculateDistance,\n  calculateArea\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*---------- General Layout ----------*/\\n\\n.measurement-layer {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  top: 0px;\\n  left: 0px;\\n}\\n\\n/*---------- Buttons ----------*/\\n\\n.measurement-layer .button-bar {\\n  position: absolute;\\n  display: flex;\\n  height: 21px;\\n  top: 5px;\\n  right: 5px;\\n  opacity: 0;\\n  transition: opacity 0.2s;\\n}\\n\\n.measurement-layer:hover .button-bar,\\n.measurement-layer .button-bar.pressed,\\n.measurement-layer .button-bar:focus-within {\\n  opacity: 1;\\n}\\n\\n.measurement-layer .button-bar button {\\n  background-color: rgba(0, 0, 0, 0.8);\\n  border-radius: 0;\\n  margin: 0;\\n  padding: 3px;\\n  border: none;\\n  cursor: pointer;\\n  outline: none;\\n}\\n\\n.measurement-layer .button-bar button:hover,\\n.measurement-layer .button-bar button:focus {\\n  background-color: rgba(70, 60, 50, 0.9);\\n}\\n\\n.measurement-layer .button-bar button.pressed {\\n  background-color: rgba(130, 120, 110, 0.9);\\n}\\n\\n.measurement-layer .circle-icon {\\n  stroke: white;\\n  fill: none;\\n  stroke-width: 2;\\n}\\n\\n.measurement-layer .ruler-icon,\\n.measurement-layer .text-icon {\\n  stroke: none;\\n  fill: white;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/components/MeasurementLayer.css\n// module id = 14\n// module chunks = 0","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*---------- General Layout ----------*/\\n\\n.measurement-layer-base {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  top: 0px;\\n  left: 0px;\\n  outline: none;\\n  font-size: 10pt;\\n}\\n\\n.line-measurement,\\n.circle-measurement,\\n.text-annotation,\\n.measurement-svg {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n/*---------- Colors ----------*/\\n\\n.line-measurement .line,\\n.circle-measurement .circle,\\n.text-annotation .arrow-line {\\n  stroke: yellow;\\n}\\n\\n.line-measurement .double-click {\\n  color: red;\\n  stroke: red;\\n  stroke-width: 5px;\\n}\\n\\n.text-annotation .arrow-head {\\n  fill: yellow;\\n}\\n\\n.measurement-text,\\n.text-annotation .text {\\n  color: yellow;\\n  background-color: rgba(0, 0, 0, 0.7);\\n}\\n\\n.measurement-layer-base .text-anchor.button-showing .delete-button,\\n.measurement-layer-base .text-annotation.editable .delete-button {\\n  background-color: rgba(50, 45, 40, 0.9);\\n}\\n\\n.measurement-layer-base .text-anchor.button-showing .delete-button:hover,\\n.measurement-layer-base .text-annotation.editable .delete-button:hover,\\n.measurement-layer-base .text-anchor .delete-button:focus {\\n  background-color: rgba(70, 60, 50, 0.9);\\n}\\n\\n.measurement-layer-base .text-anchor.button-showing .delete-button-icon,\\n.measurement-layer-base .text-annotation.editable .delete-button-icon,\\n.measurement-layer-base .text-anchor .delete-button:focus .delete-button-icon {\\n  stroke: yellow;\\n}\\n\\n/*---------- General Measurement & Text Styling ----------*/\\n\\n.line-measurement .line,\\n.circle-measurement .circle,\\n.text-annotation .arrow-line {\\n  stroke-width: 2px;\\n  stroke-linecap: butt;\\n  fill: none;\\n}\\n\\n.text-annotation .arrow-head {\\n  stroke: none;\\n}\\n\\n.measurement-text {\\n  position: relative;\\n  padding: 1px 4px;\\n  white-space: pre;\\n  cursor: default;\\n  /* Use color transitions rather than opacity, which blurs text for some reason. */\\n  /* transition: color 0.3s, background-color 0.3s; */\\n}\\n\\n.measurement-layer-base.line-end-dragged\\n  .text-anchor.just-created\\n  .measurement-text,\\n.measurement-layer-base.circle-stroke-dragged\\n  .text-anchor.just-created\\n  .measurement-text {\\n  color: transparent;\\n  background-color: transparent;\\n}\\n\\n.text-annotation .text {\\n  position: relative;\\n  padding: 1px 4px;\\n}\\n\\n.line-measurement .grabber-group:hover .line,\\n.line-measurement.mid-hover .grabber-group .line,\\n.line-measurement .line.dragged,\\n.circle-measurement .grabber-group:hover .circle,\\n.circle-measurement .circle.dragged,\\n.text-annotation .arrow-line.hover,\\n.text-annotation .arrow-line.dragged {\\n  stroke-width: 3px;\\n}\\n\\n.text-annotation .public-DraftEditor-content {\\n  /* Ensures the blinking cursor is always visible when the text is editable but empty. */\\n  min-width: 1px;\\n}\\n\\n.text-annotation .public-DraftStyleDefault-block {\\n  white-space: pre;\\n  text-align: center;\\n}\\n\\n.text-annotation.no-text .text-anchor {\\n  visibility: hidden;\\n}\\n\\n.text-annotation.no-text.editable .text-anchor {\\n  visibility: visible;\\n}\\n\\n/*---------- Grabbers ----------*/\\n\\n.line-measurement .grabber,\\n.text-annotation .arrow-line-grabber {\\n  stroke: transparent;\\n  stroke-width: 11px;\\n  stroke-linecap: butt;\\n}\\n\\n.line-measurement .grabber.start-grabber,\\n.line-measurement .grabber.end-grabber {\\n  stroke-linecap: square;\\n}\\n\\n.circle-measurement .stroke-grabber {\\n  stroke: transparent;\\n  stroke-width: 11px;\\n  fill: none;\\n}\\n\\n.circle-measurement .fill-grabber {\\n  fill: transparent;\\n  stroke: none;\\n}\\n\\n.text-annotation .arrow-head-grabber {\\n  stroke: transparent;\\n  fill: transparent;\\n}\\n\\n/*---------- Text Anchor & Delete Button ----------*/\\n\\n.measurement-layer-base .text-anchor {\\n  /* Zero-size flexbox allows us to center text without using transforms,\\n  which can lead to sub-pixel positioning (blurry lines). */\\n  position: absolute;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.measurement-layer-base .text-box {\\n  position: relative;\\n  display: flex;\\n  transform: translate(-50%, -50%);\\n}\\n\\n.measurement-layer-base .delete-button {\\n  position: absolute;\\n  right: -18px;\\n  background-color: transparent;\\n  border-radius: 0;\\n  border-style: none;\\n  outline: none;\\n  width: 18px;\\n  height: 100%;\\n  top: 0;\\n  margin: 0;\\n  padding: 0;\\n  transition: background-color 0.2s, border-color 0.2s;\\n}\\n\\n.measurement-layer-base .delete-button-svg {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  width: 15px;\\n  height: 15px;\\n}\\n\\n.measurement-layer-base.any-dragged .delete-button-svg,\\n.measurement-layer-base.any-mode-on .delete-button-svg {\\n  background-color: transparent;\\n  border-color: transparent;\\n}\\n\\n.measurement-layer-base .delete-button-icon {\\n  stroke: transparent;\\n  stroke-width: 2px;\\n  stroke-linecap: square;\\n  fill: none;\\n  transition: stroke 0.2s;\\n}\\n\\n.measurement-layer-base.any-dragged .delete-button-icon,\\n.measurement-layer-base.any-mode-on .delete-button-icon {\\n  stroke: transparent;\\n}\\n\\n/*---------- Cursors ----------*/\\n\\n.line-measurement .mid-grabber,\\n.circle-measurement .fill-grabber,\\n.text-annotation .arrow-line-grabber,\\n.measurement-layer-base.line-mid-dragged,\\n.measurement-layer-base.circle-fill-dragged,\\n.measurement-layer-base.arrow-line-dragged {\\n  cursor: pointer;\\n}\\n\\n.line-measurement .start-grabber,\\n.line-measurement .end-grabber,\\n.circle-measurement .stroke-grabber,\\n.text-annotation .text,\\n.text-annotation .arrow-head-grabber,\\n.measurement-layer-base.line-start-dragged,\\n.measurement-layer-base.line-end-dragged,\\n.measurement-layer-base.circle-stroke-dragged,\\n.measurement-layer-base.arrow-head-dragged,\\n.measurement-layer-base.text-dragged,\\n.measurement-layer-base .delete-button {\\n  cursor: pointer;\\n}\\n\\n.text-annotation.editable .text {\\n  cursor: text;\\n}\\n\\n/*---------- Pointer Events & Drag ----------*/\\n\\n.line-measurement,\\n.line-measurement .line,\\n.circle-measurement,\\n.circle-measurement .circle,\\n.text-annotation,\\n.text-annotation .arrow-line,\\n.measurement-svg {\\n  pointer-events: none;\\n}\\n\\n.measurement-layer-base .grabber-group {\\n  pointer-events: painted;\\n}\\n\\n.measurement-layer-base .text,\\n.measurement-layer-base .arrow-head-grabber,\\n.measurement-layer-base .arrow-line-grabber,\\n.measurement-layer-base .text-box,\\n.measurement-layer-base .text-anchor.button-showing .delete-button,\\n.measurement-layer-base .editable .delete-button,\\n.measurement-layer-base.any-dragged .grabber-group .start-grabber.dragged,\\n.measurement-layer-base.any-dragged .grabber-group .mid-grabber.dragged,\\n.measurement-layer-base.any-dragged .grabber-group .end-grabber.dragged,\\n.measurement-layer-base.any-dragged .grabber-group .fill-grabber.dragged,\\n.measurement-layer-base.any-dragged .grabber-group .stroke-grabber.dragged,\\n.measurement-layer-base.any-dragged .arrow-head-grabber.dragged,\\n.measurement-layer-base.any-dragged .arrow-line-grabber.dragged {\\n  pointer-events: auto;\\n}\\n\\n.measurement-layer-base.any-dragged .grabber-group,\\n.measurement-layer-base.any-dragged .text,\\n.measurement-layer-base.any-dragged .arrow-head-grabber,\\n.measurement-layer-base.any-dragged .arrow-line-grabber,\\n.measurement-layer-base.any-dragged .text-box,\\n.measurement-layer-base.any-dragged .delete-button,\\n.measurement-layer-base.any-mode-on .grabber-group,\\n.measurement-layer-base.any-mode-on .text,\\n.measurement-layer-base.any-mode-on .arrow-head-grabber,\\n.measurement-layer-base.any-mode-on .arrow-line-grabber,\\n.measurement-layer-base.any-mode-on .text-box,\\n.measurement-layer-base .delete-button {\\n  pointer-events: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/components/core/MeasurementLayerBase.css\n// module id = 15\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./MeasurementLayer.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./MeasurementLayer.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./MeasurementLayer.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/MeasurementLayer.css\n// module id = 16\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!./MeasurementLayerBase.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!./MeasurementLayerBase.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!./MeasurementLayerBase.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/core/MeasurementLayerBase.css\n// module id = 17\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/lib/urls.js\n// module id = 18\n// module chunks = 0"],"sourceRoot":""}